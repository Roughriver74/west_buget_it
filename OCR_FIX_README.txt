================================================================================
  üîß –ò–°–ü–†–ê–í–õ–ï–ù–ò–ï –û–®–ò–ë–ö–ò OCR/PDF - –ë–´–°–¢–†–ê–Ø –ò–ù–°–¢–†–£–ö–¶–ò–Ø
================================================================================

–ü–†–û–ë–õ–ï–ú–ê:
  "Unable to get page count. Is poppler installed and in PATH?"

–†–ï–®–ï–ù–ò–ï:
  ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω production Dockerfile —Å OCR –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç—è–º–∏
  ‚úÖ –ö–æ–¥ —É–∂–µ –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏ (commit: 1df11be)

================================================================================
  üìã –®–ê–ì 1: –ü–†–û–í–ï–†–ö–ê (–Ω–µ–æ–±—è–∑–∞—Ç–µ–ª—å–Ω–æ)
================================================================================

–ó–∞–ø—É—Å—Ç–∏—Ç–µ —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞:

  ./check_ocr_remote.sh

–≠—Ç–æ –ø—Ä–æ–≤–µ—Ä–∏—Ç:
  - –ï—Å—Ç—å –ª–∏ poppler-utils –≤ production –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
  - –ï—Å—Ç—å –ª–∏ tesseract-ocr
  - –£—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω—ã –ª–∏ —è–∑—ã–∫–æ–≤—ã–µ –ø–∞–∫–µ—Ç—ã (rus, eng)
  - –ê–∫—Ç—É–∞–ª–µ–Ω –ª–∏ –∫–æ–¥ –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ

================================================================================
  üöÄ –®–ê–ì 2: –î–ï–ü–õ–û–ô –í COOLIFY (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)
================================================================================

1. –û—Ç–∫—Ä–æ–π—Ç–µ: https://budget-west.shknv.ru
2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ Backend –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ù–∞–∂–º–∏—Ç–µ "Rebuild" (–ù–ï "Restart"!)
4. –î–æ–∂–¥–∏—Ç–µ—Å—å –æ–∫–æ–Ω—á–∞–Ω–∏—è (3-5 –º–∏–Ω—É—Ç)

–ò–õ–ò —á–µ—Ä–µ–∑ SSH (–µ—Å–ª–∏ Coolify –Ω–µ–¥–æ—Å—Ç—É–ø–µ–Ω):

  ssh root@93.189.228.52
  cd /root/west_buget_it
  git pull origin main
  docker-compose -f docker-compose.prod.yml build --no-cache backend
  docker-compose -f docker-compose.prod.yml up -d backend

================================================================================
  ‚úÖ –®–ê–ì 3: –ü–†–û–í–ï–†–ö–ê –†–ê–ë–û–¢–´
================================================================================

–°–ø–æ—Å–æ–± 1 - –ß–µ—Ä–µ–∑ Web UI:
  1. –û—Ç–∫—Ä–æ–π—Ç–µ https://budget-west.shknv.ru
  2. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "–û–±—Ä–∞–±–æ—Ç–∫–∞ —Å—á–µ—Ç–æ–≤"
  3. –ó–∞–≥—Ä—É–∑–∏—Ç–µ PDF —Ñ–∞–π–ª
  4. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–µ—Ç –æ—à–∏–±–æ–∫

–°–ø–æ—Å–æ–± 2 - –ß–µ—Ä–µ–∑ API:
  curl -X POST "https://api.budget-west.shknv.ru/api/v1/invoice-processing/process" \
    -H "Authorization: Bearer YOUR_TOKEN" \
    -F "file=@test.pdf"

–°–ø–æ—Å–æ–± 3 - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π:
  ./check_ocr_remote.sh

================================================================================
  üìö –î–û–ü–û–õ–ù–ò–¢–ï–õ–¨–ù–ê–Ø –î–û–ö–£–ú–ï–ù–¢–ê–¶–ò–Ø
================================================================================

  DEPLOY_OCR_FIX.md      - –ë—ã—Å—Ç—Ä–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –¥–µ–ø–ª–æ—é
  docs/OCR_PDF_FIX.md    - –ü–æ–ª–Ω–∞—è —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
  check_ocr_deps.sh      - –ü—Ä–æ–≤–µ—Ä–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –≤–Ω—É—Ç—Ä–∏ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞
  check_ocr_remote.sh    - –£–¥–∞–ª–µ–Ω–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å –≤–∞—à–µ–≥–æ –∫–æ–º–ø—å—é—Ç–µ—Ä–∞

================================================================================
  üÜò –†–ï–®–ï–ù–ò–ï –ü–†–û–ë–õ–ï–ú
================================================================================

"–û—à–∏–±–∫–∞ –≤—Å—ë –µ—â–µ –µ—Å—Ç—å –ø–æ—Å–ª–µ rebuild"
  ‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –Ω–∞–∂–∞–ª–∏ "Rebuild", –∞ –Ω–µ "Restart"
  ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ Coolify –∏—Å–ø–æ–ª—å–∑—É–µ—Ç Dockerfile.prod
  ‚Üí –ü–æ–ø—Ä–æ–±—É–π—Ç–µ rebuild —Å –æ–ø—Ü–∏–µ–π "No Cache"

"Cannot connect to server"
  ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ SSH –¥–æ—Å—Ç—É–ø: ssh root@93.189.228.52
  ‚Üí –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —É –≤–∞—Å –µ—Å—Ç—å SSH –∫–ª—é—á

"Backend container not found"
  ‚Üí –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —á—Ç–æ backend –∑–∞–ø—É—â–µ–Ω: docker ps
  ‚Üí –ü–æ—Å–º–æ—Ç—Ä–∏—Ç–µ –ª–æ–≥–∏ Coolify

================================================================================
  üîó –ü–û–õ–ï–ó–ù–´–ï –ö–û–ú–ê–ù–î–´
================================================================================

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–º —Å–µ—Ä–≤–µ—Ä–µ
./check_ocr_remote.sh

# Rebuild backend (–µ—Å–ª–∏ –Ω–µ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç–µ Coolify)
ssh root@93.189.228.52 'cd /root/west_buget_it && git pull && docker-compose -f docker-compose.prod.yml build backend && docker-compose -f docker-compose.prod.yml up -d backend'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
ssh root@93.189.228.52 'docker logs $(docker ps --filter name=backend -q) -f'

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –≤ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–µ
ssh root@93.189.228.52 'docker exec $(docker ps --filter name=backend -q) which pdfinfo'

================================================================================
  ‚ÑπÔ∏è  –ò–ù–§–û–†–ú–ê–¶–ò–Ø
================================================================================

  –ö–æ–º–º–∏—Ç:      1df11be
  –î–∞—Ç–∞:        2025-11-06
  –ò–∑–º–µ–Ω–µ–Ω–∏—è:   backend/Dockerfile.prod
  –ó–∞–≤–∏—Å–∏–º–æ—Å—Ç–∏: poppler-utils, tesseract-ocr, tesseract-ocr-rus, tesseract-ocr-eng

  –°–æ–∑–¥–∞–Ω–æ —Å –ø–æ–º–æ—â—å—é Claude Code
  https://claude.com/claude-code

================================================================================
