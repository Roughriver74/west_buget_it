#!/usr/bin/env python3
"""
–¢–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç –¥–ª—è –ø—Ä—è–º–æ–π –æ—Ç–ø—Ä–∞–≤–∫–∏ –∑–∞–ø—Ä–æ—Å–∞ –≤ 1–°
–¢–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ –∫–∞–∫ —Ä–∞–±–æ—Ç–∞—é—â–∏–π –∑–∞–ø—Ä–æ—Å –∏–∑ Postman
"""
import requests
from requests.auth import HTTPBasicAuth
import json

# 1C OData –Ω–∞—Å—Ç—Ä–æ–π–∫–∏
BASE_URL = "http://10.10.100.77/trade/odata/standard.odata"
USERNAME = "odata.user"
PASSWORD = "ak228Hu2hbs28"

# –¢–æ—á–Ω–æ —Ç–∞–∫–æ–π –∂–µ payload –∫–∞–∫ –≤ Postman (—Ä–∞–±–æ—Ç–∞—é—â–∏–π)
payload = {
    "Date": "2025-10-10T00:00:00",
    "Posted": False,
    "–û—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è_Key": "72201a7e-7fef-11ef-ad66-74563c634acb",
    "–°—Ç–∞—Ç—É—Å": "–ù–µ–°–æ–≥–ª–∞—Å–æ–≤–∞–Ω–∞",
    "–•–æ–∑—è–π—Å—Ç–≤–µ–Ω–Ω–∞—è–û–ø–µ—Ä–∞—Ü–∏—è": "–û–ø–ª–∞—Ç–∞–ü–æ—Å—Ç–∞–≤—â–∏–∫—É",
    "–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞": 50000,
    "–í–∞–ª—é—Ç–∞_Key": "f04b98ee-b430-11ea-a43c-b42e994e04d3",
    "–§–æ—Ä–º–∞–û–ø–ª–∞—Ç—ã–ù–∞–ª–∏—á–Ω–∞—è": True,
    "–§–æ—Ä–º–∞–û–ø–ª–∞—Ç—ã–ë–µ–∑–Ω–∞–ª–∏—á–Ω–∞—è": True,
    "–§–æ—Ä–º–∞–û–ø–ª–∞—Ç—ã–ü–ª–∞—Ç–µ–∂–Ω–∞—è–ö–∞—Ä—Ç–∞": False,
    "–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ–ü–ª–∞—Ç–µ–∂–∞": "–û–ø–ª–∞—Ç–∞ –ø–æ —Å—á–µ—Ç—É ‚Ññ22637559 –æ—Ç 10.10.2025\n–í —Ç.—á. –ù–î–° (20%) 8333 —Ä—É–±.",
    "–ñ–µ–ª–∞—Ç–µ–ª—å–Ω–∞—è–î–∞—Ç–∞–ü–ª–∞—Ç–µ–∂–∞": "2025-11-18T00:00:00",
    "–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç_Key": "f7289e62-5309-11ef-ad62-74563c634acb",
    "–ü–∞—Ä—Ç–Ω–µ—Ä_Key": "f7289e62-5309-11ef-ad62-74563c634acb",
    "–ë–∞–Ω–∫–æ–≤—Å–∫–∏–π–°—á–µ—Ç–ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞_Key": "00000000-0000-0000-0000-000000000000",
    "–≤—Å_–ù–æ–º–µ—Ä–ü–æ–î–∞–Ω–Ω—ã–º–ü–æ—Å—Ç–∞–≤—â–∏–∫–∞": "22637559",
    "–≤—Å_–î–∞—Ç–∞–ü–æ–î–∞–Ω–Ω—ã–º–ü–æ—Å—Ç–∞–≤—â–∏–∫–∞": "2025-10-10T00:00:00",
    "–ö—Ç–æ–ó–∞—è–≤–∏–ª_Key": "be7e04e0-4eaf-11e3-8632-50e549c4019a",
    "–ö—Ç–æ–†–µ—à–∏–ª_Key": "be7e04e0-4eaf-11e3-8632-50e549c4019a",
    "–ê–≤—Ç–æ—Ä_Key": "be7e04e0-4eaf-11e3-8632-50e549c4019a",
    "–°—Ç–∞—Ç—å—è–î–≤–∏–∂–µ–Ω–∏—è–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤_Key": "fae1b6be-f347-11ef-ad72-74563c634acb",  # –ü–û
    "–ü–ª–∞–Ω–∏—Ä–æ–≤–∞–Ω–∏–µ–°—É–º–º—ã": "–í–í–∞–ª—é—Ç–µ–ü–ª–∞—Ç–µ–∂–∞",
    "–°—Ç–∞—Ç—å—è–ê–∫—Ç–∏–≤–æ–≤–ü–∞—Å—Å–∏–≤–æ–≤_Key": "00000000-0000-0000-0000-000000000000",
    "–í–∞—Ä–∏–∞–Ω—Ç–û–ø–ª–∞—Ç—ã": "–ü—Ä–µ–¥–æ–ø–ª–∞—Ç–∞–î–æ–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è",
    "–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π": "–¢–ï–°–¢ –ò–ó –ü–†–ò–õ–û–ñ–ï–ù–ò–Ø",
    "–§–æ—Ä–º–∞–û–ø–ª–∞—Ç—ã–ó–∞—è–≤–∫–∏": "",
    "–†–∞—Å—à–∏—Ñ—Ä–æ–≤–∫–∞–ü–ª–∞—Ç–µ–∂–∞": [
        {
            "LineNumber": 1,
            "–ù–æ–º–µ–Ω–∫–ª–∞—Ç—É—Ä–∞_Key": "00000000-0000-0000-0000-000000000000",
            "–°—Ç–∞—Ç—å—è–†–∞—Å—Ö–æ–¥–æ–≤_Key": "fae1b6be-f347-11ef-ad72-74563c634acb",  # –ü–û
            "–°—É–º–º–∞": 50000,
            "–°—É–º–º–∞–ë–µ–∑–ù–î–°": 41667,
            "–°—É–º–º–∞–ù–î–°": 8333,
            "–°—Ç–∞–≤–∫–∞–ù–î–°_Key": "ed59436e-f9dc-11ee-ad54-74563c634acb",
            "–ö–æ–ª–∏—á–µ—Å—Ç–≤–æ": 1,
            "–¶–µ–Ω–∞": 50000
        }
    ],
    "–ü–æ–¥—Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ_Key": "afc66ff1-4cea-11f0-ad78-74563c634acb"
}

print("=" * 80)
print("–û—Ç–ø—Ä–∞–≤–∫–∞ –∑–∞–ø—Ä–æ—Å–∞ –≤ 1–° (—Ç–æ—á–Ω–æ –∫–∞–∫ –≤ Postman)...")
print("=" * 80)
print(f"\nURL: {BASE_URL}/Document_–ó–∞—è–≤–∫–∞–ù–∞–†–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–∏–µ–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤")
print(f"\nPayload:")
print(json.dumps(payload, ensure_ascii=False, indent=2))
print("\n" + "=" * 80)

try:
    response = requests.post(
        f"{BASE_URL}/Document_–ó–∞—è–≤–∫–∞–ù–∞–†–∞—Å—Ö–æ–¥–æ–≤–∞–Ω–∏–µ–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤?$format=json",
        auth=HTTPBasicAuth(USERNAME, PASSWORD),
        headers={"Content-Type": "application/json"},
        json=payload,
        timeout=30
    )

    print(f"\n‚úÖ Status Code: {response.status_code}")

    if response.status_code == 201:
        result = response.json()
        print(f"\nüéâ –£–°–ü–ï–•! –ó–∞—è–≤–∫–∞ —Å–æ–∑–¥–∞–Ω–∞!")
        print(f"Ref_Key: {result.get('Ref_Key')}")
        print(f"Number: {result.get('Number')}")
        print(f"\n–ü–æ–ª–Ω—ã–π –æ—Ç–≤–µ—Ç:")
        print(json.dumps(result, ensure_ascii=False, indent=2))
    else:
        print(f"\n‚ùå –û–®–ò–ë–ö–ê!")
        print(f"Response: {response.text}")

except Exception as e:
    print(f"\n‚ùå Exception: {e}")
    import traceback
    traceback.print_exc()

print("\n" + "=" * 80)
