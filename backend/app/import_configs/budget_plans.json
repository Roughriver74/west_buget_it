{
  "entity": "budget_plans",
  "display_name": {
    "ru": "Планы бюджета",
    "en": "Budget Plans"
  },
  "description": {
    "ru": "Импорт планов бюджета по месяцам и категориям",
    "en": "Import budget plans by months and categories"
  },
  "fields": [
    {
      "name": "year",
      "display_name": {"ru": "Год", "en": "Year"},
      "type": "integer",
      "required": true,
      "min": 2000,
      "max": 2100,
      "aliases": ["год", "year"]
    },
    {
      "name": "month",
      "display_name": {"ru": "Месяц", "en": "Month"},
      "type": "integer",
      "required": true,
      "min": 1,
      "max": 12,
      "aliases": ["месяц", "month"],
      "value_mapping": {
        "январь": 1, "january": 1, "янв": 1, "jan": 1,
        "февраль": 2, "february": 2, "фев": 2, "feb": 2,
        "март": 3, "march": 3, "мар": 3, "mar": 3,
        "апрель": 4, "april": 4, "апр": 4, "apr": 4,
        "май": 5, "may": 5,
        "июнь": 6, "june": 6, "июн": 6, "jun": 6,
        "июль": 7, "july": 7, "июл": 7, "jul": 7,
        "август": 8, "august": 8, "авг": 8, "aug": 8,
        "сентябрь": 9, "september": 9, "сен": 9, "sep": 9,
        "октябрь": 10, "october": 10, "окт": 10, "oct": 10,
        "ноябрь": 11, "november": 11, "ноя": 11, "nov": 11,
        "декабрь": 12, "december": 12, "дек": 12, "dec": 12
      }
    },
    {
      "name": "category_name",
      "display_name": {"ru": "Категория", "en": "Category"},
      "type": "string",
      "required": true,
      "lookup_entity": "budget_categories",
      "lookup_field": "name",
      "auto_create": false,
      "aliases": ["категория", "category", "category_name", "статья"]
    },
    {
      "name": "planned_amount",
      "display_name": {"ru": "Плановая сумма", "en": "Planned Amount"},
      "type": "decimal",
      "required": true,
      "min": 0,
      "aliases": ["плановая_сумма", "planned_amount", "план", "plan", "сумма"]
    },
    {
      "name": "capex_planned",
      "display_name": {"ru": "CAPEX план", "en": "CAPEX Planned"},
      "type": "decimal",
      "required": false,
      "min": 0,
      "default": 0,
      "aliases": ["capex_план", "capex_planned", "capex"]
    },
    {
      "name": "opex_planned",
      "display_name": {"ru": "OPEX план", "en": "OPEX Planned"},
      "type": "decimal",
      "required": false,
      "min": 0,
      "default": 0,
      "aliases": ["opex_план", "opex_planned", "opex"]
    },
    {
      "name": "status",
      "display_name": {"ru": "Статус", "en": "Status"},
      "type": "enum",
      "required": false,
      "enum": ["DRAFT", "PENDING", "APPROVED"],
      "default": "DRAFT",
      "aliases": ["статус", "status"],
      "value_mapping": {
        "черновик": "DRAFT",
        "draft": "DRAFT",
        "на согласовании": "PENDING",
        "pending": "PENDING",
        "утверждён": "APPROVED",
        "утверждена": "APPROVED",
        "approved": "APPROVED"
      }
    }
  ],
  "validation_rules": {
    "cross_field": [
      {
        "description": "Category must exist in system",
        "check": "category_exists"
      },
      {
        "description": "planned_amount should equal capex_planned + opex_planned if both provided",
        "check": "amount_consistency"
      }
    ],
    "business_rules": [
      {
        "description": "Unique combination of (year, month, category) per department",
        "check": "unique_period_category"
      }
    ]
  },
  "import_options": {
    "allow_update": true,
    "update_key": ["year", "month", "category_name"],
    "auto_create_related": false,
    "skip_duplicates": false,
    "batch_size": 100
  }
}
