# Руководство пользователя - IT Budget Manager

## Содержание

1. [Обзор приложения](#обзор-приложения)
2. [Быстрый старт](#быстрый-старт)
3. [Основные функции](#основные-функции)
4. [Страницы приложения](#страницы-приложения)
5. [Работа с данными](#работа-с-данными)
6. [FAQ](#faq)

---

## Обзор приложения

**IT Budget Manager** - это веб-приложение для управления бюджетом IT-отдела. Приложение позволяет:

- Планировать бюджет на год по месяцам и категориям
- Отслеживать фактические расходы
- Анализировать исполнение бюджета (План vs Факт)
- Управлять справочниками категорий, контрагентов и организаций
- Получать аналитические отчеты

### Основные понятия

- **OPEX** (Operational Expenses) - операционные расходы (лицензии, облако, зарплаты)
- **CAPEX** (Capital Expenses) - капитальные расходы (оборудование, серверы)
- **План** - запланированная сумма на месяц по категории
- **Факт** - фактически израсходованная сумма
- **Остаток** - разница между планом и фактом

---

## Быстрый старт

### 1. Запуск приложения

```bash
# Перейти в директорию проекта
cd /home/user/west_buget_it

# Запуск backend
cd backend
source venv/bin/activate
uvicorn app.main:app --reload --host 0.0.0.0 --port 8000

# В новом терминале: запуск frontend
cd frontend
npm run dev
```

### 2. Открыть приложение

- **Frontend**: http://localhost:5173
- **API Docs**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc

### 3. Начало работы

1. Откройте браузер и перейдите на http://localhost:5173
2. Вы попадете на дашборд с обзором бюджета
3. Перейдите в раздел "Планирование" для создания плана на год
4. Добавьте расходы через кнопку "Добавить расход"

---

## Основные функции

### Планирование бюджета

**Страница:** Планирование → План на год

1. Выберите год (по умолчанию текущий)
2. Если план не создан, нажмите "Инициализировать план"
3. Заполните плановые суммы по категориям и месяцам
4. Суммы сохраняются автоматически при изменении

**Функции:**
- Редактирование ячеек (клик по сумме)
- Копирование плана из другого года с коэффициентом
- Автоматический подсчет итогов по OPEX/CAPEX

### Отслеживание расходов

**Страница:** Расходы → Заявки на расходы

1. Просмотр списка всех расходов
2. Фильтрация по статусу, категории, датам
3. Поиск по номеру или контрагенту

**Добавление расхода:**
1. Нажмите "Добавить заявку"
2. Заполните обязательные поля:
   - Дата расхода
   - Категория
   - Сумма
3. Опционально: контрагент, описание
4. Нажмите "Добавить"

### Обзор исполнения бюджета

**Страница:** Бюджет → Обзор (План-Факт-Остаток)

Выберите год и месяц для просмотра:
- **План** - запланированная сумма
- **Факт** - фактические расходы
- **Остаток** - оставшийся бюджет
- **% исполнения** - процент израсходованных средств

**Цветовая индикация:**
- 🟢 Зеленый - остаток > 20% от плана
- 🟡 Желтый - остаток 5-20% от плана
- 🔴 Красный - остаток < 5% или перерасход

**Быстрое добавление расхода:**
- Нажмите "Добавить расход" прямо из обзора
- Дата и месяц подставятся автоматически

---

## Страницы приложения

### 1. Дашборд (Главная)

**Путь:** /dashboard

**Что показывает:**
- Основные метрики: План, Факт, Остаток, % исполнения
- График CAPEX vs OPEX
- Расходы по категориям (диаграмма)
- Динамика расходов по месяцам

**Фильтры:**
- Выбор года
- Выбор месяца (опционально)

### 2. Обзор бюджета

**Путь:** /budget

**Функционал:**
- Таблица План-Факт-Остаток
- Группировка по OPEX/CAPEX
- Цветовая индикация остатков
- Быстрое добавление расхода

### 3. Планирование

**Путь:** /budget/plan

**Функционал:**
- Редактируемая таблица (категории × месяцы)
- Инициализация плана на год
- Копирование плана из другого года
- Автоматические итоги

### 4. Расходы

**Путь:** /expenses

**Функционал:**
- Список всех заявок
- Фильтры: статус, категория, период
- Поиск по номеру/контрагенту
- Создание/редактирование заявок

### 5. Справочники

**Путь:** /categories

**Функционал:**
- Управление категориями расходов
- Создание подкатегорий
- Деактивация категорий
- Фильтры по типу (OPEX/CAPEX) и статусу

### 6. Аналитика

**Путь:** /analytics/balance

**Функционал:**
- Аналитика по категориям
- Детальные отчеты
- Экспорт данных (в разработке)

---

## Работа с данными

### Планирование на новый год

**Сценарий 1: Создание с нуля**

1. Перейдите в "Планирование → План на год"
2. Выберите год (например, 2026)
3. Нажмите "Инициализировать план"
4. Заполните плановые суммы вручную

**Сценарий 2: Копирование из предыдущего года**

1. Перейдите в "Планирование → План на год"
2. Выберите целевой год (например, 2026)
3. Нажмите "Скопировать из другого года"
4. Выберите исходный год (например, 2025)
5. Установите коэффициент (например, 1.1 = +10%)
6. Нажмите "Скопировать"

### Учет расходов

**Типичный процесс:**

1. **Создание заявки:**
   - Дата расхода
   - Категория (из справочника)
   - Сумма
   - Контрагент (опционально)
   - Статус: "Черновик"

2. **Согласование:**
   - Статус меняется на "К оплате"

3. **Оплата:**
   - Дата оплаты
   - Статус: "Оплачена"
   - Расход учитывается в "Факте"

4. **Закрытие:**
   - Статус: "Закрыта"

### Управление категориями

**Создание категории:**

1. Перейдите в "Справочники → Категории"
2. Нажмите "Добавить статью"
3. Заполните:
   - Название
   - Тип (OPEX/CAPEX)
   - Описание (опционально)
   - Родительская категория (для подкатегории)
4. Нажмите "Создать"

**Подкатегории:**

Пример структуры:
```
Аутсорс (OPEX)
  ├─ Разработка (OPEX)
  ├─ Тестирование (OPEX)
  └─ DevOps (OPEX)

Оборудование (CAPEX)
  ├─ Серверы (CAPEX)
  ├─ Сетевое оборудование (CAPEX)
  └─ Рабочие станции (CAPEX)
```

---

## FAQ

### Вопросы по планированию

**Q: Как изменить плановую сумму?**
A: Кликните по ячейке с суммой, введите новое значение, нажмите Enter или кликните вне ячейки.

**Q: Можно ли скопировать план с изменением?**
A: Да, используйте функцию "Скопировать из другого года" и установите коэффициент (1.1 = +10%, 0.9 = -10%).

**Q: Что делать, если план уже создан?**
A: При копировании существующие значения будут обновлены. Для редактирования отдельных ячеек просто кликайте по ним.

### Вопросы по расходам

**Q: Как добавить расход за прошлый месяц?**
A: При создании расхода укажите нужную дату. Система автоматически учтет расход в соответствующем месяце.

**Q: Почему расход не отображается в "Факте"?**
A: Убедитесь, что статус расхода "Оплачена" и установлена дата оплаты.

**Q: Можно ли удалить расход?**
A: Да, нажмите кнопку "Удалить" в списке расходов (функция в разработке).

### Вопросы по аналитике

**Q: Почему остаток отрицательный?**
A: Это перерасход - фактические расходы превысили план. Система выделит такие категории красным цветом.

**Q: Как посмотреть расходы за весь год?**
A: На дашборде не указывайте месяц - будут показаны данные за весь выбранный год.

**Q: Где экспорт в Excel?**
A: Функция в разработке. Пока можно использовать API для получения данных.

### Технические вопросы

**Q: Как сбросить пароль?**
A: Аутентификация в разработке. Пока приложение доступно без авторизации.

**Q: Можно ли работать нескольким пользователям одновременно?**
A: Да, приложение поддерживает многопользовательский режим.

**Q: Где хранятся данные?**
A: В базе данных SQLite (для разработки) или PostgreSQL (для production).

---

## Горячие клавиши

**Редактирование ячеек плана:**
- `Enter` - сохранить и перейти к следующей ячейке
- `Esc` - отменить изменения
- `Tab` - перейти к следующей ячейке

**Навигация:**
- `Ctrl + /` - открыть справку (в разработке)

---

## Поддержка

### Возникли проблемы?

1. Проверьте логи backend: `tail -f backend.log`
2. Проверьте консоль браузера (F12 → Console)
3. Попробуйте обновить страницу (Ctrl+F5)

### Сообщить об ошибке

GitHub Issues: https://github.com/Roughriver74/west_buget_it/issues

---

## Полезные ссылки

- **API Documentation**: http://localhost:8000/docs
- **ReDoc**: http://localhost:8000/redoc
- **GitHub Repository**: https://github.com/Roughriver74/west_buget_it
- **Technical Documentation**: См. ARCHITECTURE.md, PROJECT_SUMMARY.md

---

**Версия:** 0.1.0
**Дата обновления:** 2025-10-23
**Статус:** В разработке
