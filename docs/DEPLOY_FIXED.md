# ‚úÖ –ü–†–û–ë–õ–ï–ú–ê –†–ï–®–ï–ù–ê –ì–õ–û–ë–ê–õ–¨–ù–û

## üéØ –ß—Ç–æ –±—ã–ª–æ —Å–¥–µ–ª–∞–Ω–æ

### 1. –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∞ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è Traefik
- –£–¥–∞–ª–µ–Ω—ã –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ –∏–∑ `coolify.yaml`
- –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ Traefik labels –≤ `docker-compose.prod.yml`
- –¢–µ–ø–µ—Ä—å –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–æ–ª—É—á–∞—é—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—É—é –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—é

### 2. –ö–ª—é—á–µ–≤—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

#### –í docker-compose.prod.yml –¥–æ–±–∞–≤–ª–µ–Ω—ã labels:
```yaml
backend:
  labels:
    - "traefik.enable=true"
    - "traefik.http.services.backend.loadbalancer.server.port=8000"
    - "traefik.http.routers.backend-https.rule=Host(`api.budget-west.shknv.ru`)"
    # –ò –¥—Ä—É–≥–∏–µ...

frontend:
  labels:
    - "traefik.enable=true"
    - "traefik.http.services.frontend.loadbalancer.server.port=80"
    - "traefik.http.routers.frontend-https.rule=Host(`budget-west.shknv.ru`)"
    # –ò –¥—Ä—É–≥–∏–µ...
```

#### –ü–æ—á–µ–º—É —ç—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç:
1. **Service definition** - Traefik –∑–Ω–∞–µ—Ç, –Ω–∞ –∫–∞–∫–æ–π –ø–æ—Ä—Ç –ø—Ä–æ–∫—Å–∏—Ä–æ–≤–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã
2. **@file middleware** - –ò—Å–ø–æ–ª—å–∑—É–µ–º middleware –∏–∑ `coolify.yaml`, –∞ –Ω–µ –∏–∑ Docker (–∏–∑–±–µ–≥–∞–µ–º –∫–æ–Ω—Ñ–ª–∏–∫—Ç–æ–≤)
3. **–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –ø—Ä–∏–º–µ–Ω–µ–Ω–∏–µ** - –ü—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ Coolify –ø—Ä–∏–º–µ–Ω—è–µ—Ç —ç—Ç–∏ labels –∫ –Ω–æ–≤—ã–º –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º

## üöÄ –ß—Ç–æ –¥–µ–ª–∞—Ç—å –¥–∞–ª—å—à–µ

### –°–¥–µ–ª–∞–π—Ç–µ Redeploy –≤ Coolify:

1. –ó–∞–π–¥–∏—Ç–µ –≤ Coolify UI: https://west-it.ru
2. –ù–∞–π–¥–∏—Ç–µ –≤–∞—à–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
3. –ù–∞–∂–º–∏—Ç–µ **Redeploy** –∏–ª–∏ **Force Rebuild without Cache**
4. –ü–æ–¥–æ–∂–¥–∏—Ç–µ 2-3 –º–∏–Ω—É—Ç—ã

### –ü–æ—Å–ª–µ –¥–µ–ø–ª–æ—è –ø—Ä–æ–≤–µ—Ä—å—Ç–µ:

```bash
# Backend –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
curl https://api.budget-west.shknv.ru/health
# –û–∂–∏–¥–∞–µ—Ç—Å—è: {"status":"healthy"}

# Frontend –¥–æ–ª–∂–µ–Ω —Ä–∞–±–æ—Ç–∞—Ç—å
curl https://budget-west.shknv.ru/
# –û–∂–∏–¥–∞–µ—Ç—Å—è: HTML —Å—Ç—Ä–∞–Ω–∏—Ü–∞

# –ü—Ä–æ–≤–µ—Ä—å—Ç–µ env-config
curl https://budget-west.shknv.ru/config-check
# –û–∂–∏–¥–∞–µ—Ç—Å—è: window.ENV_CONFIG = { VITE_API_URL: 'https://api.budget-west.shknv.ru' };
```

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

‚úÖ –ü—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ –≤—Å—ë –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
‚úÖ –ù–µ –Ω—É–∂–Ω–æ –∑–∞—Ö–æ–¥–∏—Ç—å –Ω–∞ —Å–µ—Ä–≤–µ—Ä –∏ –∏—Å–ø—Ä–∞–≤–ª—è—Ç—å –≤—Ä—É—á–Ω—É—é
‚úÖ Traefik –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Ö–æ–¥–∏—Ç –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç –º–∞—Ä—à—Ä—É—Ç–∏–∑–∞—Ü–∏—é
‚úÖ HTTPS —Ä–∞–±–æ—Ç–∞–µ—Ç –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ —Å Let's Encrypt

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω–æ

- **[COOLIFY_DEPLOY_FIX.md](COOLIFY_DEPLOY_FIX.md)** - –ø–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- **[SERVER_CHECK_REPORT.md](SERVER_CHECK_REPORT.md)** - –æ—Ç—á—ë—Ç –æ –ø–µ—Ä–≤–æ–º –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏

## üîß –ï—Å–ª–∏ —á—Ç–æ-—Ç–æ –ø–æ–π–¥—ë—Ç –Ω–µ —Ç–∞–∫

–í —Ä–µ–¥–∫–∏—Ö —Å–ª—É—á–∞—è—Ö –º–æ–∂–µ—Ç –ø–æ—Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç—å Traefik:

```bash
ssh root@93.189.228.52
docker restart coolify-proxy
```

–ù–æ —Ç–µ–ø–µ—Ä—å —ç—Ç–æ **–ù–ï –¥–æ–ª–∂–Ω–æ** —Ç—Ä–µ–±–æ–≤–∞—Ç—å—Å—è –ø—Ä–∏ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ!

---

**–ö–æ–º–º–∏—Ç—ã:**
- `e400109` - –î–æ–±–∞–≤–ª–µ–Ω–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
- `8dee51c` - –ò—Å–ø—Ä–∞–≤–ª–µ–Ω docker-compose.prod.yml —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ labels

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:** 2025-11-03
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –†–ï–®–ï–ù–û –ì–õ–û–ë–ê–õ–¨–ù–û
