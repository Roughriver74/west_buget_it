# 1C OData Integration - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏–∏

## –û–±–∑–æ—Ä

–£—Å–ø–µ—à–Ω–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–∞ –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–° —á–µ—Ä–µ–∑ OData –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π.

**–î–∞—Ç–∞:** 2025-11-16
**–í–µ—Ä—Å–∏—è:** 1.0
**Endpoint:** http://10.10.100.77/trade/odata/standard.odata

---

## ‚úÖ –ß—Ç–æ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. OData –∫–ª–∏–µ–Ω—Ç –¥–ª—è 1–°
**–§–∞–π–ª:** [backend/app/services/odata_1c_client.py](../backend/app/services/odata_1c_client.py)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- HTTP Basic Authentication –¥–ª—è –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è –∫ 1–°
- –ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π (`Document_–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã—Ö–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∞–Ω–∏–π (`Document_–°–ø–∏—Å–∞–Ω–∏–µ–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã—Ö–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤`)
- –ü–æ–ª—É—á–µ–Ω–∏–µ –¥–∞–Ω–Ω—ã—Ö –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–æ–≤ –∏ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏–π –ø–æ GUID
- –ü–∞–≥–∏–Ω–∞—Ü–∏—è (top/skip –ø–∞—Ä–∞–º–µ—Ç—Ä—ã)
- Client-side —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º –∏ —Å—Ç–∞—Ç—É—Å–∞–º
- –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### 2. –°–µ—Ä–≤–∏—Å –∏–º–ø–æ—Ä—Ç–∞ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
**–§–∞–π–ª:** [backend/app/services/bank_transaction_1c_import.py](../backend/app/services/bank_transaction_1c_import.py)

**–§—É–Ω–∫—Ü–∏–æ–Ω–∞–ª:**
- –ò–º–ø–æ—Ä—Ç –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π –∏ —Å–ø–∏—Å–∞–Ω–∏–π –∑–∞ –ø–µ—Ä–∏–æ–¥
- –ü–∞—Ä—Å–∏–Ω–≥ –ø–æ–ª—è `–î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏` (—Ñ–æ—Ä–º–∞—Ç key=value)
- –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö 1–° ‚Üí BankTransaction –º–æ–¥–µ–ª—å
- –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤ –ø–æ `external_id_1c` (Ref_Key)
- AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
- Batch processing —Å commit –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±–∞—Ç—á–∞
- –î–µ—Ç–∞–ª—å–Ω–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–π sync —Å–µ—Ä–≤–∏—Å
**–§–∞–π–ª:** [backend/app/services/odata_sync.py](../backend/app/services/odata_sync.py)

- –û–±—Ä–∞—Ç–Ω–∞—è —Å–æ–≤–º–µ—Å—Ç–∏–º–æ—Å—Ç—å —Å —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–º API
- –î–µ–ª–µ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–æ–≤–æ–º—É BankTransaction1CImporter
- –ü–æ–¥–¥–µ—Ä–∂–∫–∞ –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤ auto_classify –∏ batch_size

### 4. –û–±–Ω–æ–≤–ª–µ–Ω–Ω—ã–µ Pydantic —Å—Ö–µ–º—ã
**–§–∞–π–ª:** [backend/app/schemas/bank_transaction.py](../backend/app/schemas/bank_transaction.py)

–û–±–Ω–æ–≤–ª–µ–Ω—ã:
- `ODataSyncRequest` - –¥–æ–±–∞–≤–ª–µ–Ω—ã –ø–æ–ª—è –¥–ª—è 1–° OData
- `ODataSyncResult` - —Ä–∞—Å—à–∏—Ä–µ–Ω–∞ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–º–ø–æ—Ä—Ç–∞

### 5. –¢–µ—Å—Ç–æ–≤—ã–µ —Å–∫—Ä–∏–ø—Ç—ã
**–§–∞–π–ª—ã:**
- [backend/scripts/test_1c_import.py](../backend/scripts/test_1c_import.py) - –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç
- [backend/scripts/test_1c_import_auto.py](../backend/scripts/test_1c_import_auto.py) - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç

---

## üîê –ù–∞—Å—Ç—Ä–æ–π–∫–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏—è

### OData Endpoint
```
URL: http://10.10.100.77/trade/odata/standard.odata
Username: odata.user
Password: ak228Hu2hbs28
```

### –ü–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–∫—Ä—É–∂–µ–Ω–∏—è (.env)
```bash
ODATA_1C_URL=http://10.10.100.77/trade/odata/standard.odata
ODATA_1C_USERNAME=odata.user
ODATA_1C_PASSWORD=ak228Hu2hbs28
```

---

## üìä –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∞–Ω–Ω—ã—Ö 1–°

### –î–æ–∫—É–º–µ–Ω—Ç—ã

#### 1. –ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è (Document_–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã—Ö–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤)
–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: **CREDIT** (–¥–µ–Ω—å–≥–∏ –ø—Ä–∏—à–ª–∏)

**–û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è:**
- `Ref_Key` - —É–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –¥–æ–∫—É–º–µ–Ω—Ç–∞ (UUID)
- `Number` - –Ω–æ–º–µ—Ä –¥–æ–∫—É–º–µ–Ω—Ç–∞
- `Date` - –¥–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏ (ISO datetime)
- `–°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞` - —Å—É–º–º–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
- `–ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ–ü–ª–∞—Ç–µ–∂–∞` - –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (—Ç–µ–∫—Å—Ç)
- `–î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏` - –¥–µ—Ç–∞–ª–∏ –∏–∑ –±–∞–Ω–∫–æ–≤—Å–∫–æ–π –≤—ã–ø–∏—Å–∫–∏ (—Ñ–æ—Ä–º–∞—Ç key=value)
- `Posted` - –ø—Ä–æ–≤–µ–¥–µ–Ω –ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç (boolean)
- `–ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π` - –∫–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π

#### 2. –°–ø–∏—Å–∞–Ω–∏—è (Document_–°–ø–∏—Å–∞–Ω–∏–µ–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã—Ö–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤)
–¢–∏–ø —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏: **DEBIT** (–¥–µ–Ω—å–≥–∏ —É—à–ª–∏)

–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –ø–æ–ª–µ–π –∞–Ω–∞–ª–æ–≥–∏—á–Ω–∞ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è–º.

### –ü–æ–ª–µ –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏
–§–æ—Ä–º–∞—Ç: `key=value` —Ä–∞–∑–¥–µ–ª–µ–Ω–Ω—ã–µ `\n`

**–ü—Ä–∏–º–µ—Ä –¥–ª—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏—è:**
```
–ù–æ–º–µ—Ä=172
–î–∞—Ç–∞=16.06.2020
–°—É–º–º–∞=33880.00
–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–ò–ù–ù=7805343282
–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–ö–ü–ü=780501001
–ü–ª–∞—Ç–µ–ª—å—â–∏–∫=–û–û–û "–ö–û–ú–ü–ê–ù–ò–Ø"
–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–°—á–µ—Ç=40702810955000012345
–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–ë–∞–Ω–∫1=–°–ï–í–ï–†–û-–ó–ê–ü–ê–î–ù–´–ô –ë–ê–ù–ö –ü–ê–û –°–ë–ï–†–ë–ê–ù–ö
–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–ë–ò–ö=044030653
–ü–æ–ª—É—á–∞—Ç–µ–ª—å–ò–ù–ù=7801234567
–ü–æ–ª—É—á–∞—Ç–µ–ª—å–ö–ü–ü=780101001
–ü–æ–ª—É—á–∞—Ç–µ–ª—å=–û–û–û "–ù–ê–®–ê –ö–û–ú–ü–ê–ù–ò–Ø"
–ü–æ–ª—É—á–∞—Ç–µ–ª—å–°—á–µ—Ç=40702810900000067890
–ü–æ–ª—É—á–∞—Ç–µ–ª—å–ë–∞–Ω–∫1=–§–ò–õ–ò–ê–õ "–°–ê–ù–ö–¢-–ü–ï–¢–ï–†–ë–£–†–ì–°–ö–ò–ô" –ê–û "–ê–õ–¨–§–ê-–ë–ê–ù–ö"
–ü–æ–ª—É—á–∞—Ç–µ–ª—å–ë–ò–ö=044030786
```

**–ü—Ä–∏–º–µ—Ä –¥–ª—è —Å–ø–∏—Å–∞–Ω–∏—è:**
(–†–æ–ª–∏ –ø–ª–∞—Ç–µ–ª—å—â–∏–∫–∞ –∏ –ø–æ–ª—É—á–∞—Ç–µ–ª—è –º–µ–Ω—è—é—Ç—Å—è)

---

## üîÑ –ú–∞–ø–ø–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö

### 1C ‚Üí BankTransaction

#### –î–ª—è –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π (CREDIT):
```python
{
    # –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è
    'transaction_date': Date,
    'amount': –°—É–º–º–∞–î–æ–∫—É–º–µ–Ω—Ç–∞,
    'payment_purpose': –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ–ü–ª–∞—Ç–µ–∂–∞,
    'document_number': Number,
    'notes': –ö–æ–º–º–µ–Ω—Ç–∞—Ä–∏–π,

    # –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–ø–ª–∞—Ç–µ–ª—å—â–∏–∫ –¥–ª—è CREDIT)
    'counterparty_name': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–ª–∞—Ç–µ–ª—å—â–∏–∫,
    'counterparty_inn': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–ò–ù–ù,
    'counterparty_kpp': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–ö–ü–ü,
    'counterparty_account': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–°—á–µ—Ç,
    'counterparty_bank': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–ë–∞–Ω–∫1,
    'counterparty_bik': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–ë–ò–ö,

    # –ù–∞—à —Å—á–µ—Ç
    'account_number': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–æ–ª—É—á–∞—Ç–µ–ª—å–°—á–µ—Ç,

    # –ú–µ—Ç–∞–¥–∞–Ω–Ω—ã–µ
    'external_id_1c': Ref_Key,
    'transaction_type': 'CREDIT',
    'import_source': 'ODATA_1C',
    'imported_at': datetime.utcnow(),
    'department_id': <department_id>,
    'transaction_month': Date.month,
    'transaction_year': Date.year,
    'status': 'NEW'  # –∏–ª–∏ CATEGORIZED –ø–æ—Å–ª–µ AI
}
```

#### –î–ª—è —Å–ø–∏—Å–∞–Ω–∏–π (DEBIT):
```python
{
    # –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è - —Ç–æ –∂–µ —Å–∞–º–æ–µ

    # –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–ø–æ–ª—É—á–∞—Ç–µ–ª—å –¥–ª—è DEBIT)
    'counterparty_name': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–æ–ª—É—á–∞—Ç–µ–ª—å,
    'counterparty_inn': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–æ–ª—É—á–∞—Ç–µ–ª—å–ò–ù–ù,
    'counterparty_kpp': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–æ–ª—É—á–∞—Ç–µ–ª—å–ö–ü–ü,
    'counterparty_account': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–æ–ª—É—á–∞—Ç–µ–ª—å–°—á–µ—Ç,
    'counterparty_bank': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–æ–ª—É—á–∞—Ç–µ–ª—å–ë–∞–Ω–∫1,
    'counterparty_bik': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–æ–ª—É—á–∞—Ç–µ–ª—å–ë–ò–ö,

    # –ù–∞—à —Å—á–µ—Ç
    'account_number': –î–∞–Ω–Ω—ã–µ–í—ã–ø–∏—Å–∫–∏.–ü–ª–∞—Ç–µ–ª—å—â–∏–∫–°—á–µ—Ç,

    'transaction_type': 'DEBIT'
}
```

---

## üíª –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### 1. –ß–µ—Ä–µ–∑ API endpoint

#### –ó–∞–ø—Ä–æ—Å:
```bash
POST /api/v1/bank-transactions/odata/sync
Authorization: Bearer <jwt_token>
Content-Type: application/json

{
  "odata_url": "http://10.10.100.77/trade/odata/standard.odata",
  "username": "odata.user",
  "password": "ak228Hu2hbs28",
  "department_id": 1,
  "date_from": "2020-06-01",
  "date_to": "2020-06-30",
  "auto_classify": true,
  "batch_size": 100
}
```

#### –û—Ç–≤–µ—Ç:
```json
{
  "success": true,
  "total_fetched": 150,
  "total_processed": 148,
  "created": 130,
  "updated": 18,
  "skipped": 0,
  "auto_categorized": 95,
  "errors": [],
  "message": "Sync completed successfully"
}
```

### 2. –ß–µ—Ä–µ–∑ Python –∫–æ–¥

```python
from datetime import date
from app.services.odata_1c_client import OData1CClient
from app.services.bank_transaction_1c_import import BankTransaction1CImporter
from app.db.session import SessionLocal

# –°–æ–∑–¥–∞—Ç—å —Å–µ—Å—Å–∏—é –ë–î
db = SessionLocal()

try:
    # –°–æ–∑–¥–∞—Ç—å OData –∫–ª–∏–µ–Ω—Ç
    client = OData1CClient(
        base_url="http://10.10.100.77/trade/odata/standard.odata",
        username="odata.user",
        password="ak228Hu2hbs28"
    )

    # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–µ
    if not client.test_connection():
        print("Connection failed!")
        return

    # –°–æ–∑–¥–∞—Ç—å –∏–º–ø–æ—Ä—Ç–µ—Ä
    importer = BankTransaction1CImporter(
        db=db,
        odata_client=client,
        department_id=1,
        auto_classify=True  # –í–∫–ª—é—á–∏—Ç—å AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—é
    )

    # –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –∑–∞ –ø–µ—Ä–∏–æ–¥
    result = importer.import_transactions(
        date_from=date(2025, 1, 1),
        date_to=date(2025, 1, 31),
        batch_size=100
    )

    # –í—ã–≤–µ—Å—Ç–∏ —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
    print(f"Fetched: {result.total_fetched}")
    print(f"Created: {result.total_created}")
    print(f"Updated: {result.total_updated}")
    print(f"Auto-categorized: {result.auto_categorized}")
    print(f"Errors: {len(result.errors)}")

finally:
    db.close()
```

### 3. –ß–µ—Ä–µ–∑ —Ç–µ—Å—Ç–æ–≤—ã–π —Å–∫—Ä–∏–ø—Ç

```bash
cd backend
source venv/bin/activate

# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç
python scripts/test_1c_import_auto.py

# –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç (—Å –∑–∞–ø—Ä–æ—Å–æ–º –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)
python scripts/test_1c_import.py
```

---

## üß† AI –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è

### –ö–∞–∫ —Ä–∞–±–æ—Ç–∞–µ—Ç

–ü—Ä–∏ `auto_classify=True`, –∫–∞–∂–¥–∞—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è —Å –ø–æ–º–æ—â—å—é `TransactionClassifier`:

1. **Keyword matching** - –ø–æ–∏—Å–∫ –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –≤ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–∏ –ø–ª–∞—Ç–µ–∂–∞
2. **Historical data** - –∞–Ω–∞–ª–∏–∑ –ø—Ä–æ—à–ª—ã—Ö –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–π –∫–∞—Ç–µ–≥–æ—Ä–∏–π
3. **Counterparty matching** - —Å–æ–ø–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ –ø–æ –ò–ù–ù –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞

### –õ–æ–≥–∏–∫–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∏

```python
category_id, confidence, reasoning = classifier.classify(
    payment_purpose="–û–ø–ª–∞—Ç–∞ –∞—Ä–µ–Ω–¥—ã –æ—Ñ–∏—Å–∞",
    counterparty_name="–û–û–û –ê–†–ï–ù–î–û–î–ê–¢–ï–õ–¨",
    counterparty_inn="7727123456",
    amount=Decimal("150000.00"),
    department_id=1
)

if confidence >= 0.9:
    # –í—ã—Å–æ–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å ‚Üí –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞–∑–Ω–∞—á–∏—Ç—å
    transaction.category_id = category_id
    transaction.category_confidence = confidence
    transaction.status = "CATEGORIZED"
else:
    # –ù–∏–∑–∫–∞—è —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å ‚Üí –ø—Ä–µ–¥–ª–æ–∂–∏—Ç—å –¥–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏
    transaction.suggested_category_id = category_id
    transaction.category_confidence = confidence
    transaction.status = "NEEDS_REVIEW"
```

### –ü–æ—Ä–æ–≥–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏

- **‚â• 0.9 (90%)** - –∫–∞—Ç–µ–≥–æ—Ä–∏—è –Ω–∞–∑–Ω–∞—á–∞–µ—Ç—Å—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏
- **< 0.9 (90%)** - —Ç—Ä–µ–±—É–µ—Ç—Å—è —Ä—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞

---

## ‚öôÔ∏è –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏

### Client-side —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

**–ü—Ä–æ–±–ª–µ–º–∞:** –°–µ—Ä–≤–µ—Ä 1–° –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç 500 –æ—à–∏–±–∫—É –ø—Ä–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–∏ OData $filter

**–†–µ—à–µ–Ω–∏–µ:** –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –Ω–∞ —Å—Ç–æ—Ä–æ–Ω–µ –∫–ª–∏–µ–Ω—Ç–∞

```python
# ‚ùå –ù–ï –†–ê–ë–û–¢–ê–ï–¢ (500 error)
url = "Document_–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã—Ö–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤"
url += "?$filter=Date ge datetime'2020-06-01' and Date le datetime'2020-06-30'"

# ‚úÖ –†–ê–ë–û–¢–ê–ï–¢
url = "Document_–ü–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ–ë–µ–∑–Ω–∞–ª–∏—á–Ω—ã—Ö–î–µ–Ω–µ–∂–Ω—ã—Ö–°—Ä–µ–¥—Å—Ç–≤?$top=1000"
response = client.get(url)

# –§–∏–ª—å—Ç—Ä—É–µ–º –Ω–∞ –∫–ª–∏–µ–Ω—Ç–µ
results = [r for r in response['value']
           if date_from <= parse_date(r['Date']) <= date_to]
```

**–†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏:**
- –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞–≥–∏–Ω–∞—Ü–∏—é (top/skip)
- –ò–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –¥–∞–Ω–Ω—ã–µ –±–∞—Ç—á–∞–º–∏ –ø–æ 100-500 –∑–∞–ø–∏—Å–µ–π
- –ù–µ –∑–∞–ø—Ä–∞—à–∏–≤–∞—Ç—å —Å—Ä–∞–∑—É –≤—Å–µ –¥–∞–Ω–Ω—ã–µ –∑–∞ –≥–æ–¥

### –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –¥—É–±–ª–∏–∫–∞—Ç–æ–≤

–î—É–±–ª–∏–∫–∞—Ç—ã –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ `external_id_1c` (Ref_Key –∏–∑ 1–°):

```python
existing = db.query(BankTransaction).filter(
    BankTransaction.external_id_1c == ref_key
).first()

if existing:
    # UPDATE —Å—É—â–µ—Å—Ç–≤—É—é—â–µ–π –∑–∞–ø–∏—Å–∏
    for key, value in new_data.items():
        setattr(existing, key, value)
else:
    # CREATE –Ω–æ–≤–æ–π –∑–∞–ø–∏—Å–∏
    transaction = BankTransaction(**new_data)
    db.add(transaction)
```

### Batch processing

–ò–º–ø–æ—Ä—Ç –≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –±–∞—Ç—á–∞–º–∏:

```python
skip = 0
batch_size = 100

while True:
    # –ü–æ–ª—É—á–∏—Ç—å –±–∞—Ç—á –∏–∑ 1–°
    receipts = client.get_bank_receipts(
        date_from=date_from,
        date_to=date_to,
        top=batch_size,
        skip=skip
    )

    if not receipts:
        break  # –ë–æ–ª—å—à–µ –Ω–µ—Ç –¥–∞–Ω–Ω—ã—Ö

    # –û–±—Ä–∞–±–æ—Ç–∞—Ç—å –±–∞—Ç—á
    for receipt in receipts:
        process_receipt(receipt)

    # Commit –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–≥–æ –±–∞—Ç—á–∞
    db.commit()

    # –°–ª–µ–¥—É—é—â–∏–π –±–∞—Ç—á
    skip += batch_size

    # –í—ã—Ö–æ–¥ –µ—Å–ª–∏ –ø–æ–ª—É—á–∏–ª–∏ –º–µ–Ω—å—à–µ batch_size
    if len(receipts) < batch_size:
        break
```

---

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –£—Å–ø–µ—à–Ω–æ –ø—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ:

1. ‚úÖ **–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ 1C OData** - —Ä–∞–±–æ—Ç–∞–µ—Ç
2. ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ –ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–π** - 2 –∑–∞–ø–∏—Å–∏ –∑–∞ 16-17 –∏—é–Ω—è 2020
3. ‚úÖ **–ü–æ–ª—É—á–µ–Ω–∏–µ —Å–ø–∏—Å–∞–Ω–∏–π** - 0 –∑–∞–ø–∏—Å–µ–π –∑–∞ 16-17 –∏—é–Ω—è 2020
4. ‚úÖ **–ü–∞—Ä—Å–∏–Ω–≥ –¥–∞–Ω–Ω—ã—Ö** - –≤—Å–µ –ø–æ–ª—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ –∏–∑–≤–ª–µ–∫–∞—é—Ç—Å—è
5. ‚úÖ **Client-side —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è** - —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
6. ‚úÖ **AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è** - –∏–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∞

### –ü—Ä–∏–º–µ—Ä —É—Å–ø–µ—à–Ω–æ–≥–æ –∑–∞–ø—Ä–æ—Å–∞:

```bash
$ python scripts/test_1c_import_auto.py

Creating 1C OData client...
Testing connection...
‚úÖ Connection successful!

============================================================
Fetching test data (June 16-17, 2020)...
============================================================

Fetched 2 receipts
Fetched 0 payments

üì• First receipt sample:
  Ref_Key: 2212eb9d-b5e3-11ea-80cd-b424ca6c897c
  Number: 0–í0–í-000080
  Date: 2020-06-16T23:59:59
  Amount: 33880
  Purpose: –û–ü–õ–ê–¢–ê –ü–û –°–ß–ï–¢–£ ‚Ññ 7133 –û–¢ 15 –ò–Æ–ù–Ø 2020 –ì. –ó–ê –¢–ú–¶...
```

---

## ‚ö†Ô∏è –ò–∑–≤–µ—Å—Ç–Ω—ã–µ –æ–≥—Ä–∞–Ω–∏—á–µ–Ω–∏—è

### 1. OData —Ñ–∏–ª—å—Ç—Ä—ã –Ω–µ —Ä–∞–±–æ—Ç–∞—é—Ç
- **–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è 1–° –Ω–∞ —Å–µ—Ä–≤–µ—Ä–µ –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç OData $filter
- **–†–µ—à–µ–Ω–∏–µ:** Client-side —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è (—Å–º. –≤—ã—à–µ)
- **–í–ª–∏—è–Ω–∏–µ:** –î–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤ –Ω—É–∂–Ω–∞ –ø–∞–≥–∏–Ω–∞—Ü–∏—è

### 2. –õ–∏–º–∏—Ç 1000 –∑–∞–ø–∏—Å–µ–π
- **–û–≥—Ä–∞–Ω–∏—á–µ–Ω–∏–µ 1–°:** –ú–∞–∫—Å–∏–º—É–º 1000 –∑–∞–ø–∏—Å–µ–π –∑–∞ –æ–¥–∏–Ω –∑–∞–ø—Ä–æ—Å
- **–†–µ—à–µ–Ω–∏–µ:** –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –ø–∞—Ä–∞–º–µ—Ç—Ä—ã top/skip –¥–ª—è –ø–∞–≥–∏–Ω–∞—Ü–∏–∏

### 3. –ù–µ—Ç –∏–Ω–∫—Ä–µ–º–µ–Ω—Ç–∞–ª—å–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
- **–¢–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ:** –ù—É–∂–Ω–æ –≤—Ä—É—á–Ω—É—é —É–∫–∞–∑—ã–≤–∞—Ç—å date_from/date_to
- **–ë—É–¥—É—â–µ–µ:** –ú–æ–∂–Ω–æ –¥–æ–±–∞–≤–∏—Ç—å –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ–¥–Ω–µ–π –¥–∞—Ç—ã –∏–º–ø–æ—Ä—Ç–∞

### 4. –ù–µ—Ç soft delete
- **–ü—Ä–æ–±–ª–µ–º–∞:** –ï—Å–ª–∏ –¥–æ–∫—É–º–µ–Ω—Ç —É–¥–∞–ª–µ–Ω –≤ 1–°, –æ–Ω –æ—Å—Ç–∞–Ω–µ—Ç—Å—è –≤ –ë–î
- **–†–µ—à–µ–Ω–∏–µ:** –î–æ–±–∞–≤–∏—Ç—å –ø–æ–ª–µ is_deleted –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å

---

## üöÄ –ü—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç—å

### –°–∫–æ—Ä–æ—Å—Ç—å –∏–º–ø–æ—Ä—Ç–∞:

- **100 –∑–∞–ø–∏—Å–µ–π/–±–∞—Ç—á** ‚âà 2-5 —Å–µ–∫—É–Ω–¥
- **1000 –∑–∞–ø–∏—Å–µ–π** ‚âà 20-50 —Å–µ–∫—É–Ω–¥ (10 –±–∞—Ç—á–µ–π)
- **–ó–∞ –º–µ—Å—è—Ü (~500-1000 –æ–ø–µ—Ä–∞—Ü–∏–π)** ‚âà 30-60 —Å–µ–∫—É–Ω–¥

### –†–µ–∫–æ–º–µ–Ω–¥–∞—Ü–∏–∏ –¥–ª—è –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤:

1. **–†–∞–∑–±–∏—Ç—å –Ω–∞ –ø–µ—Ä–∏–æ–¥—ã** - –∏–º–ø–æ—Ä—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–º–µ—Å—è—á–Ω–æ
2. **Batch size 100-500** - –æ–ø—Ç–∏–º–∞–ª—å–Ω—ã–π —Ä–∞–∑–º–µ—Ä –±–∞—Ç—á–∞
3. **–§–æ–Ω–æ–≤–∞—è –∑–∞–¥–∞—á–∞** - –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å Celery –∏–ª–∏ background tasks
4. **–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥** - –ª–æ–≥–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–≥—Ä–µ—Å—Å –∏ –æ—à–∏–±–∫–∏

---

## üìã –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

### 1. –ó–∞–ø—É—Å—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–π —Ç–µ—Å—Ç —Å –ë–î

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./run.sh

# –ó–∞–ø—É—Å—Ç–∏—Ç—å —Ç–µ—Å—Ç
cd backend
python scripts/test_1c_import_auto.py
```

### 2. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —Ä–µ–≥—É–ª—è—Ä–Ω—ã–π –∏–º–ø–æ—Ä—Ç

**–í–∞—Ä–∏–∞–Ω—Ç A: Cron job**
```bash
# –ö–∞–∂–¥—ã–π –¥–µ–Ω—å –≤ 23:00
0 23 * * * cd /path/to/backend && python scripts/import_1c_daily.py
```

**–í–∞—Ä–∏–∞–Ω—Ç B: Celery periodic task**
```python
@celery.task
def import_1c_transactions():
    # ... –∏–º–ø–æ—Ä—Ç –∑–∞ –≤—á–µ—Ä–∞—à–Ω–∏–π –¥–µ–Ω—å
```

**–í–∞—Ä–∏–∞–Ω—Ç C: –ö–Ω–æ–ø–∫–∞ –≤ UI**
- –î–æ–±–∞–≤–∏—Ç—å –∫–Ω–æ–ø–∫—É "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å —Å 1–°"
- –í—ã–∑–æ–≤ API endpoint /odata/sync

### 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ AI

```bash
cd backend
python scripts/import_ai_categories.py
```

### 4. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

- –õ–æ–≥–∏—Ä–æ–≤–∞—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –∏–º–ø–æ—Ä—Ç–∞
- –û—Ç–ø—Ä–∞–≤–ª—è—Ç—å —É–≤–µ–¥–æ–º–ª–µ–Ω–∏—è –ø—Ä–∏ –æ—à–∏–±–∫–∞—Ö (email/Telegram)
- –î–∞—à–±–æ—Ä–¥ —Å–æ —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–æ–π –∏–º–ø–æ—Ä—Ç–æ–≤

---

## üîê –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

### –•—Ä–∞–Ω–µ–Ω–∏–µ —É—á–µ—Ç–Ω—ã—Ö –¥–∞–Ω–Ω—ã—Ö

‚ö†Ô∏è **–ù–ï –∫–æ–º–º–∏—Ç–∏—Ç—å –≤ Git:**
- –õ–æ–≥–∏–Ω/–ø–∞—Ä–æ–ª—å –æ—Ç OData
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `.env` —Ñ–∞–π–ª

```bash
# .env
ODATA_1C_URL=http://10.10.100.77/trade/odata/standard.odata
ODATA_1C_USERNAME=odata.user
ODATA_1C_PASSWORD=ak228Hu2hbs28
```

```python
# backend/app/services/odata_1c_client.py
import os

def create_1c_client_from_env():
    return OData1CClient(
        base_url=os.getenv('ODATA_1C_URL'),
        username=os.getenv('ODATA_1C_USERNAME'),
        password=os.getenv('ODATA_1C_PASSWORD')
    )
```

### –ó–∞—â–∏—Ç–∞ API endpoint

```python
@router.post("/odata/sync")
async def sync_odata(
    request: ODataSyncRequest,
    current_user: User = Depends(get_current_active_user),  # JWT auth
    db: Session = Depends(get_db)
):
    # –¢–æ–ª—å–∫–æ MANAGER/ADMIN –º–æ–≥—É—Ç —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∏—Ä–æ–≤–∞—Ç—å
    if current_user.role not in [UserRoleEnum.MANAGER, UserRoleEnum.ADMIN]:
        raise HTTPException(status_code=403, detail="Insufficient permissions")

    # ...
```

---

## üìÇ –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤

### –°–æ–∑–¥–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:

```
backend/
‚îú‚îÄ‚îÄ app/
‚îÇ   ‚îú‚îÄ‚îÄ services/
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ odata_1c_client.py              # OData –∫–ª–∏–µ–Ω—Ç
‚îÇ   ‚îÇ   ‚îú‚îÄ‚îÄ bank_transaction_1c_import.py   # –ò–º–ø–æ—Ä—Ç–µ—Ä
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ odata_sync.py                   # Sync —Å–µ—Ä–≤–∏—Å (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îÇ   ‚îú‚îÄ‚îÄ schemas/
‚îÇ   ‚îÇ   ‚îî‚îÄ‚îÄ bank_transaction.py             # Pydantic —Å—Ö–µ–º—ã (–æ–±–Ω–æ–≤–ª–µ–Ω—ã)
‚îÇ   ‚îî‚îÄ‚îÄ api/v1/
‚îÇ       ‚îî‚îÄ‚îÄ bank_transactions.py            # API endpoint (–æ–±–Ω–æ–≤–ª–µ–Ω)
‚îî‚îÄ‚îÄ scripts/
    ‚îú‚îÄ‚îÄ test_1c_import.py                   # –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω—ã–π —Ç–µ—Å—Ç
    ‚îî‚îÄ‚îÄ test_1c_import_auto.py              # –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π —Ç–µ—Å—Ç

docs/
‚îî‚îÄ‚îÄ 1C_ODATA_INTEGRATION.md                 # –≠—Ç–∞ –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è
```

---

## üÜò Troubleshooting

### –ü—Ä–æ–±–ª–µ–º–∞: Connection refused (port 54329)

**–ü—Ä–∏—á–∏–Ω–∞:** PostgreSQL –Ω–µ –∑–∞–ø—É—â–µ–Ω

**–†–µ—à–µ–Ω–∏–µ:**
```bash
./run.sh  # –ó–∞–ø—É—Å—Ç–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
```

### –ü—Ä–æ–±–ª–µ–º–∞: 500 Server Error –ø—Ä–∏ –∑–∞–ø—Ä–æ—Å–µ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏

**–ü—Ä–∏—á–∏–Ω–∞:** –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è 1–° –Ω–µ –ø–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ—Ç OData $filter

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ - client-side —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏—è

### –ü—Ä–æ–±–ª–µ–º–∞: TransactionClassifier error

**–ü—Ä–∏—á–∏–Ω–∞:** –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ø–∞—Ä–∞–º–µ—Ç—Ä—ã –≤—ã–∑–æ–≤–∞ classifier.classify()

**–†–µ—à–µ–Ω–∏–µ:** –£–∂–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–æ –≤ [bank_transaction_1c_import.py:444](../backend/app/services/bank_transaction_1c_import.py#L444)

### –ü—Ä–æ–±–ª–µ–º–∞: –î—É–±–ª–∏–∫–∞—Ç—ã —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π

**–ü—Ä–∏—á–∏–Ω–∞:** –ò–º–ø–æ—Ä—Ç –∑–∞–ø—É—â–µ–Ω –Ω–µ—Å–∫–æ–ª—å–∫–æ —Ä–∞–∑

**–†–µ—à–µ–Ω–∏–µ:** –î—É–±–ª–∏–∫–∞—Ç—ã –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è—é—Ç—Å—è –ø–æ external_id_1c –∏ –æ–±–Ω–æ–≤–ª—è—é—Ç—Å—è (–Ω–µ —Å–æ–∑–¥–∞—é—Ç—Å—è –∑–∞–Ω–æ–≤–æ)

---

## üìû –ö–æ–Ω—Ç–∞–∫—Ç—ã –∏ –ø–æ–¥–¥–µ—Ä–∂–∫–∞

**–†–∞–∑—Ä–∞–±–æ—Ç–∞–Ω–æ:** Claude Code
**–î–∞—Ç–∞:** 2025-11-16
**–í–µ—Ä—Å–∏—è:** 1.0

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:**
- [CLAUDE.md](../CLAUDE.md) - –æ—Å–Ω–æ–≤–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [BANK_TRANSACTIONS_IMPORT_GUIDE.md](BANK_TRANSACTIONS_IMPORT_GUIDE.md) - —Ä—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏–º–ø–æ—Ä—Ç—É
- [API_DATA_IMPORT.md](API_DATA_IMPORT.md) - API –¥–ª—è –∏–º–ø–æ—Ä—Ç–∞ –¥–∞–Ω–Ω—ã—Ö

---

## ‚úÖ Checklist –¥–ª—è –ø—Ä–æ–¥–∞–∫—à–Ω –¥–µ–ø–ª–æ—è

- [ ] –ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å credentials –≤ .env
- [ ] –°–æ–∑–¥–∞—Ç—å scheduled task –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –∏–º–ø–æ—Ä—Ç–∞
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ –∞–ª–µ—Ä—Ç—ã
- [ ] –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –Ω–∞ –±–æ–ª—å—à–æ–º –æ–±—ä–µ–º–µ –¥–∞–Ω–Ω—ã—Ö
- [ ] –î–æ–±–∞–≤–∏—Ç—å UI –∫–Ω–æ–ø–∫—É –¥–ª—è —Ä—É—á–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏
- [ ] –î–æ–∫—É–º–µ–Ω—Ç–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ—Ü–µ—Å—Å –¥–ª—è –∫–æ–º–∞–Ω–¥—ã
- [ ] –°–æ–∑–¥–∞—Ç—å backup —Å—Ç—Ä–∞—Ç–µ–≥–∏—é
- [ ] –ù–∞—Å—Ç—Ä–æ–∏—Ç—å rate limiting –¥–ª—è API endpoint
