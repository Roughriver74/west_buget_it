# –û—Ç—á–µ—Ç –æ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ –¢–ó: –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π –∏–∑ 1–°

**–î–∞—Ç–∞:** 17 –Ω–æ—è–±—Ä—è 2025
**–í–µ—Ä—Å–∏—è:** 1.2
**–°—Ç–∞—Ç—É—Å:** –ü—Ä–∞–∫—Ç–∏—á–µ—Å–∫–∏ –∑–∞–≤–µ—Ä—à–µ–Ω–æ (98% –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏) ‚ú®

---

## üìã –û–±–∑–æ—Ä

–î–∞–Ω–Ω—ã–π –¥–æ–∫—É–º–µ–Ω—Ç –æ–ø–∏—Å—ã–≤–∞–µ—Ç —Ç–µ–∫—É—â–µ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏ —Ç–µ—Ö–Ω–∏—á–µ—Å–∫–æ–≥–æ –∑–∞–¥–∞–Ω–∏—è **"–ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ –∏ –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è –ø—Ä–∏—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤ –∏–∑ 1–°"** –¥–ª—è –º–æ–¥—É–ª—è **Bank Transactions**.

---

## ‚úÖ –ß—Ç–æ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ

### 1. **Backend - –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö**

#### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –ø–æ–ª—è BankTransaction
- ‚úÖ `transaction_date` - –î–∞—Ç–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏
- ‚úÖ `amount` - –°—É–º–º–∞
- ‚úÖ `transaction_type` - –¢–∏–ø: DEBIT (—Ä–∞—Å—Ö–æ–¥) / CREDIT (–ø—Ä–∏—Ö–æ–¥)
- ‚úÖ `counterparty_name`, `counterparty_inn` - –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç
- ‚úÖ `payment_purpose` - –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø–ª–∞—Ç–µ–∂–∞ (–æ—Å–Ω–æ–≤–∞ –¥–ª—è AI)
- ‚úÖ `organization_id` - –ù–∞—à–∞ –æ—Ä–≥–∞–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ `category_id` - –ö–∞—Ç–µ–≥–æ—Ä–∏—è (—Å—Ç–∞—Ç—å—è —Ä–∞—Å—Ö–æ–¥–æ–≤)
- ‚úÖ `status` - –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ `external_id_1c` - –£–Ω–∏–∫–∞–ª—å–Ω—ã–π ID –∏–∑ 1–° (–∑–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π)
- ‚úÖ **NEW:** `payment_source` - –ò—Å—Ç–æ—á–Ω–∏–∫ –ø–ª–∞—Ç–µ–∂–∞ (BANK/CASH)

#### ‚úÖ AI –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
- ‚úÖ `category_confidence` - –£–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å AI (0-1)
- ‚úÖ `suggested_category_id` - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏—è
- ‚úÖ `is_regular_payment` - –ü—Ä–∏–∑–Ω–∞–∫ —Ä–µ–≥—É–ª—è—Ä–Ω–æ–≥–æ –ø–ª–∞—Ç–µ–∂–∞

#### ‚úÖ Smart Matching —Å –∑–∞—è–≤–∫–∞–º–∏
- ‚úÖ `expense_id` - –°–≤—è–∑–∞–Ω–Ω–∞—è –∑–∞—è–≤–∫–∞ –Ω–∞ —Ä–∞—Å—Ö–æ–¥
- ‚úÖ `matching_score` - –°—Ç–µ–ø–µ–Ω—å —Å–æ–≤–ø–∞–¥–µ–Ω–∏—è (0-100)
- ‚úÖ `suggested_expense_id` - –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–Ω–∞—è –∑–∞—è–≤–∫–∞

### 2. **Backend - API Endpoints**

#### ‚úÖ –û—Å–Ω–æ–≤–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏
```bash
GET  /api/v1/bank-transactions          # –°–ø–∏—Å–æ–∫ —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
GET  /api/v1/bank-transactions/stats    # –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
POST /api/v1/bank-transactions/import   # –ò–º–ø–æ—Ä—Ç –∏–∑ Excel
```

#### ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å 1–°
```bash
POST /api/v1/bank-transactions/sync/odata  # –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ OData
```

**–ü–∞—Ä–∞–º–µ—Ç—Ä—ã:**
- `date_from`, `date_to` - –ü–µ—Ä–∏–æ–¥ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ ‚úÖ
- `department_id` - –û—Ç–¥–µ–ª ‚úÖ
- `auto_classify` - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è ‚úÖ

#### ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è
–ü–æ–¥–¥–µ—Ä–∂–∏–≤–∞–µ–º—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:
- ‚úÖ `status` - –°—Ç–∞—Ç—É—Å –æ–±—Ä–∞–±–æ—Ç–∫–∏
- ‚úÖ `transaction_type` - CREDIT/DEBIT
- ‚úÖ `date_from`, `date_to` - –ü–µ—Ä–∏–æ–¥
- ‚úÖ `search` - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É, –ò–ù–ù, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
- ‚úÖ `department_id` - Multi-tenancy
- ‚úÖ `only_unprocessed` - –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ
- ‚úÖ **NEW:** `payment_source` - –ë–∞–Ω–∫/–ö–∞—Å—Å–∞

#### ‚úÖ AI –ö–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –∏ Matching
```bash
GET  /api/v1/bank-transactions/{id}/category-suggestions  # –¢–æ–ø-3 –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –æ—Ç AI
GET  /api/v1/bank-transactions/{id}/matching-expenses     # –ü–æ–¥—Ö–æ–¥—è—â–∏–µ –∑–∞—è–≤–∫–∏
PUT  /api/v1/bank-transactions/{id}/categorize            # –ù–∞–∑–Ω–∞—á–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏—é
PUT  /api/v1/bank-transactions/{id}/link                  # –°–≤—è–∑–∞—Ç—å —Å –∑–∞—è–≤–∫–æ–π
```

### 3. **Backend - –°–µ—Ä–≤–∏—Å—ã**

#### ‚úÖ TransactionClassifier (AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è)
**–§–∞–π–ª:** `backend/app/services/transaction_classifier.py`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ Keyword matching —Å –≤–µ—Å–∞–º–∏ (exact: 10, startswith: 8, contains: 5)
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö (–ø—Ä–æ—à–ª—ã–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—è)
- ‚úÖ –£—á–µ—Ç –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç–∞ (–ø–æ –ò–ù–ù)
- ‚úÖ –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ –ø—Ä–∏ —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏ > 90%
- ‚úÖ –ü—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –æ–±—ä—è—Å–Ω–µ–Ω–∏–µ–º

**–ö–∞—Ç–µ–≥–æ—Ä–∏–∏:**
- ‚úÖ OPEX: –ê—Ä–µ–Ω–¥–∞, –£—Å–ª—É–≥–∏ —Å–≤—è–∑–∏, –ö–∞–Ω—Ü—Ç–æ–≤–∞—Ä—ã, –•–æ–∑—Ç–æ–≤–∞—Ä—ã, –∏ —Ç.–¥.
- ‚úÖ CAPEX: –ö–æ–º–ø—å—é—Ç–µ—Ä—ã, –°–µ—Ä–≤–µ—Ä—ã, –õ–∏—Ü–µ–Ω–∑–∏–∏ –∏ —Ç.–¥.
- ‚úÖ –ù–∞–ª–æ–≥–∏: –ù–î–§–õ, –ù–î–°, –°—Ç—Ä–∞—Ö–æ–≤—ã–µ –≤–∑–Ω–æ—Å—ã

#### ‚úÖ RegularPaymentDetector (–†–µ–≥—É–ª—è—Ä–Ω—ã–µ –ø–ª–∞—Ç–µ–∂–∏)
**–§–∞–π–ª:** `backend/app/services/transaction_classifier.py`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –û–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ–¥–ø–∏—Å–æ–∫, –∞—Ä–µ–Ω–¥—ã, —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö —É—Å–ª—É–≥
- ‚úÖ –ü–∞—Ç—Ç–µ—Ä–Ω—ã: MONTHLY, QUARTERLY
- ‚úÖ –ê–Ω–∞–ª–∏–∑ –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É + —Å—É–º–º–∞ + –∏–Ω—Ç–µ—Ä–≤–∞–ª

#### ‚úÖ BankTransactionImporter (–ò–º–ø–æ—Ä—Ç –∏–∑ Excel)
**–§–∞–π–ª:** `backend/app/services/bank_transaction_import.py`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ê–≤—Ç–æ-–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–æ–ª–æ–Ω–æ–∫ (–î–∞—Ç–∞, –°—É–º–º–∞, –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç, –ò–ù–ù, –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ, –∏ —Ç.–¥.)
- ‚úÖ –ü–æ–¥–¥–µ—Ä–∂–∫–∞ —Ä—É—Å—Å–∫–∏—Ö –∏ –∞–Ω–≥–ª–∏–π—Å–∫–∏—Ö –∑–∞–≥–æ–ª–æ–≤–∫–æ–≤
- ‚úÖ –í–∞–ª–∏–¥–∞—Ü–∏—è –æ–±—è–∑–∞—Ç–µ–ª—å–Ω—ã—Ö –ø–æ–ª–µ–π
- ‚úÖ –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏–µ –¥—É–±–ª–µ–π —á–µ—Ä–µ–∑ `external_id_1c`
- ‚úÖ Batch processing

#### ‚úÖ OData1CClient (–ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°)
**–§–∞–π–ª:** `backend/app/services/odata_1c_client.py`

**–í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:**
- ‚úÖ –ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫ 1–° OData API
- ‚úÖ –ü–æ–ª—É—á–µ–Ω–∏–µ –±–∞–Ω–∫–æ–≤—Å–∫–∏—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è –ø–æ –¥–∞—Ç–∞–º
- ‚úÖ –ü–∞–≥–∏–Ω–∞—Ü–∏—è (–∑–∞—â–∏—Ç–∞ –æ—Ç –±–æ–ª—å—à–∏—Ö –æ–±—ä–µ–º–æ–≤)

### 4. **Frontend - BankTransactionsPage**

**–§–∞–π–ª:** `frontend/src/pages/BankTransactionsPage.tsx`

#### ‚úÖ –û—Å–Ω–æ–≤–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª
- ‚úÖ **–¢–∞–±–ª–∏—Ü–∞ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π** —Å –ø–∞–≥–∏–Ω–∞—Ü–∏–µ–π
- ‚úÖ **–¶–≤–µ—Ç–æ–≤–æ–µ –≤—ã–¥–µ–ª–µ–Ω–∏–µ:**
  - –ó–µ–ª–µ–Ω—ã–π –¥–ª—è CREDIT (–ø—Ä–∏—Ö–æ–¥)
  - –ö—Ä–∞—Å–Ω—ã–π –¥–ª—è DEBIT (—Ä–∞—Å—Ö–æ–¥)
- ‚úÖ **–°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞:**
  - –í—Å–µ–≥–æ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π
  - –ü—Ä–∏—Ö–æ–¥ (–æ–±—â–∞—è —Å—É–º–º–∞)
  - –†–∞—Å—Ö–æ–¥ (–æ–±—â–∞—è —Å—É–º–º–∞)
  - –¢—Ä–µ–±—É–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫–∏
  - –û–±—Ä–∞–±–æ—Ç–∞–Ω–æ

#### ‚úÖ –§–∏–ª—å—Ç—Ä—ã
- ‚úÖ **–ë—ã—Å—Ç—Ä—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã –ø–æ –¥–∞—Ç–∞–º:**
  - –°–µ–≥–æ–¥–Ω—è
  - –í—á–µ—Ä–∞
  - –≠—Ç–æ—Ç –º–µ—Å—è—Ü
  - –ü—Ä–æ—à–ª—ã–π –º–µ—Å—è—Ü
  - –≠—Ç–æ—Ç –≥–æ–¥
  - –ü—Ä–æ—à–ª—ã–π –≥–æ–¥
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ —Ñ–∏–ª—å—Ç—Ä—ã:**
  - –¢–∏–ø –æ–ø–µ—Ä–∞—Ü–∏–∏ (CREDIT/DEBIT)
  - –°—Ç–∞—Ç—É—Å
  - –î–∏–∞–ø–∞–∑–æ–Ω –¥–∞—Ç (RangePicker)
  - –ü–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É, –ò–ù–ù, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
  - –¢–æ–ª—å–∫–æ –Ω–µ–æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã–µ

#### ‚úÖ –ò–º–ø–æ—Ä—Ç –∏ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–ò–º–ø–æ—Ä—Ç –∏–∑ Excel"** - –∑–∞–≥—Ä—É–∑–∫–∞ –≤—ã–ø–∏—Å–∫–∏
- ‚úÖ **–ö–Ω–æ–ø–∫–∞ "–°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å 1–°"** - –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∑–∞–≥—Ä—É–∑–∫–∞ —á–µ—Ä–µ–∑ OData
  - –í—ã–±–æ—Ä –ø–µ—Ä–∏–æ–¥–∞
  - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –∫–∞—Ç–µ–≥–æ—Ä–∏–∑–∞—Ü–∏—è

#### ‚úÖ –†–∞–±–æ—Ç–∞ —Å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏—è–º–∏
- ‚úÖ **Inline —Ä–µ–¥–∞–∫—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ** –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –∏ —Å—Ç–∞—Ç—É—Å–∞
- ‚úÖ **AI –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π** (—Ç–æ–ø-3 —Å —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç—å—é)
- ‚úÖ **Smart matching** —Å –∑–∞—è–≤–∫–∞–º–∏ –Ω–∞ —Ä–∞—Å—Ö–æ–¥
- ‚úÖ **–°–≤—è–∑—ã–≤–∞–Ω–∏–µ** —Å –∑–∞—è–≤–∫–∞–º–∏
- ‚úÖ **–ú–∞—Å—Å–æ–≤–æ–µ —É–¥–∞–ª–µ–Ω–∏–µ** (–¥–ª—è MANAGER/ADMIN)

#### ‚úÖ UI/UX
- ‚úÖ Tooltips —Å –ø–æ–ª–Ω—ã–º –Ω–∞–∑–Ω–∞—á–µ–Ω–∏–µ–º –ø–ª–∞—Ç–µ–∂–∞
- ‚úÖ –¢–µ–≥–∏ –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π —Å –ø—Ä–æ—Ü–µ–Ω—Ç–æ–º —É–≤–µ—Ä–µ–Ω–Ω–æ—Å—Ç–∏
- ‚úÖ –ò–∫–æ–Ω–∫–∏ –¥–ª—è —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ –ê–¥–∞–ø—Ç–∏–≤–Ω—ã–π layout

---

## ‚úÖ –ß—Ç–æ –≤—ã–ø–æ–ª–Ω–µ–Ω–æ —Å–µ–≥–æ–¥–Ω—è (17 –Ω–æ—è–±—Ä—è 2025)

### 1. ‚úÖ PaymentSourceEnum (BANK/CASH)
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ

#### Backend:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω enum `PaymentSourceEnum` –≤ `backend/app/db/models.py:154-157`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–æ –ø–æ–ª–µ `payment_source` –≤ –º–æ–¥–µ–ª—å `BankTransaction`
- ‚úÖ –°–æ–∑–¥–∞–Ω–∞ –∏ –ø—Ä–∏–º–µ–Ω–µ–Ω–∞ –º–∏–≥—Ä–∞—Ü–∏—è `2025_11_17_0612-6bad3b34ad66`
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã Pydantic schemas –≤ `backend/app/schemas/bank_transaction.py`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä `payment_source` –≤ endpoint `GET /bank-transactions`
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω —Ñ–∏–ª—å—Ç—Ä `payment_source` –≤ endpoint `GET /bank-transactions/stats`

#### Frontend:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω state `paymentSource` –≤ BankTransactionsPage
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω Select "–ò—Å—Ç–æ—á–Ω–∏–∫" (üè¶ –ë–∞–Ω–∫ / üíµ –ö–∞—Å—Å–∞)
- ‚úÖ –û–±–Ω–æ–≤–ª–µ–Ω—ã API —Ç–∏–ø—ã –≤ `bankTransactions.ts`
- ‚úÖ –§–∏–ª—å—Ç—Ä –ø–µ—Ä–µ–¥–∞–µ—Ç—Å—è –≤ `getTransactions()` –∏ `getStats()`

### 2. ‚úÖ Endpoint GET /stats —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω—ã –ø–∞—Ä–∞–º–µ—Ç—Ä—ã —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–∏ –≤ endpoint `GET /stats`:
  - `status` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Å—Ç–∞—Ç—É—Å—É
  - `transaction_type` - —Ñ–∏–ª—å—Ç—Ä –ø–æ —Ç–∏–ø—É (DEBIT/CREDIT)
  - `payment_source` - —Ñ–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É (BANK/CASH)
  - `search` - –ø–æ–∏—Å–∫ –ø–æ –∫–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç—É, –ò–ù–ù, –Ω–∞–∑–Ω–∞—á–µ–Ω–∏—é
  - `date_from`, `date_to` - –ø–µ—Ä–∏–æ–¥ (—É–∂–µ –±—ã–ª–∏)
- ‚úÖ –§—Ä–æ–Ω—Ç–µ–Ω–¥ –æ–±–Ω–æ–≤–ª–µ–Ω: —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–µ—Ä–µ—Å—á–∏—Ç—ã–≤–∞–µ—Ç—Å—è –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ –ª—é–±–æ–≥–æ —Ñ–∏–ª—å—Ç—Ä–∞
- ‚úÖ queryKey –¥–ª—è `getStats` –≤–∫–ª—é—á–∞–µ—Ç –≤—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã –¥–ª—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–π –∏–Ω–≤–∞–ª–∏–¥–∞—Ü–∏–∏ –∫—ç—à–∞

### 3. ‚úÖ –ú–µ—Ç–∫–∞ "–ê–≤—Ç–æ" –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ

#### –†–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ:
- ‚úÖ –î–æ–±–∞–≤–ª–µ–Ω–∞ –ª–æ–≥–∏–∫–∞ –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è –∑–µ–ª–µ–Ω–æ–π –º–µ—Ç–∫–∏ "–ê–≤—Ç–æ"
- ‚úÖ –ú–µ—Ç–∫–∞ –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç—Å—è –∫–æ–≥–¥–∞ `category_confidence >= 0.9` (90%)
- ‚úÖ –û—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è —Ä—è–¥–æ–º —Å –Ω–∞–∑–≤–∞–Ω–∏–µ–º –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –≤ –∫–æ–ª–æ–Ω–∫–µ —Ç–∞–±–ª–∏—Ü—ã
- ‚úÖ –ò—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è Ant Design Tag —Å —Ü–≤–µ—Ç–æ–º green

**–ü—Ä–∏–º–µ—Ä –æ—Ç–æ–±—Ä–∞–∂–µ–Ω–∏—è:**
```
[–ê—Ä–µ–Ω–¥–∞ –ø–æ–º–µ—â–µ–Ω–∏–π (95%)] [–ê–≤—Ç–æ]
```

---

### 4. ‚úÖ –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–æ–∫—É–ø–∞—Ç–µ–ª–∏ (–ø—Ä–∏—Ö–æ–¥)" –∏ "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ (—Ä–∞—Å—Ö–æ–¥)"
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ

**–ó–∞–¥–∞—á–∞:** –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –∫–∞—Ç–µ–≥–æ—Ä–∏–π –ø–æ —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏

#### –í—ã–ø–æ–ª–Ω–µ–Ω–æ:
1. ‚úÖ **–°–æ–∑–¥–∞–Ω —Å–∫—Ä–∏–ø—Ç** `backend/scripts/add_customer_supplier_categories.py`
   - –î–æ–±–∞–≤–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –≤—Å–µ—Ö –∏–ª–∏ –≤—ã–±—Ä–∞–Ω–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–∞
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ –Ω–∞ —Å—É—â–µ—Å—Ç–≤—É—é—â–∏–µ (skip duplicates)
2. ‚úÖ **–î–æ–±–∞–≤–ª–µ–Ω—ã –∫–∞—Ç–µ–≥–æ—Ä–∏–∏** –≤ `budget_categories`:
   - "–ü–æ–∫—É–ø–∞—Ç–µ–ª–∏ (–ø—Ä–∏—Ö–æ–¥)" - –¥–ª—è CREDIT (type: OPEX)
   - "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ (—Ä–∞—Å—Ö–æ–¥)" - –¥–ª—è DEBIT (type: OPEX)
   - –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö 8 –∞–∫—Ç–∏–≤–Ω—ã—Ö –æ—Ç–¥–µ–ª–æ–≤ (16 –∫–∞—Ç–µ–≥–æ—Ä–∏–π total)
3. ‚úÖ **–£–ª—É—á—à–µ–Ω TransactionClassifier**:
   - –û–±–Ω–æ–≤–ª–µ–Ω—ã REVENUE_KEYWORDS ‚Üí "–ü–æ–∫—É–ø–∞—Ç–µ–ª–∏ (–ø—Ä–∏—Ö–æ–¥)"
   - –î–æ–±–∞–≤–ª–µ–Ω—ã SUPPLIER_KEYWORDS ‚Üí "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ (—Ä–∞—Å—Ö–æ–¥)"
   - –ú–µ—Ç–æ–¥ `classify()` –ø—Ä–∏–Ω–∏–º–∞–µ—Ç –ø–∞—Ä–∞–º–µ—Ç—Ä `transaction_type`
   - –ü—Ä–∏–æ—Ä–∏—Ç–µ–∑–∞—Ü–∏—è –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤ –ø–æ —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏:
     * CREDIT ‚Üí –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç REVENUE_KEYWORDS
     * DEBIT ‚Üí –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç SUPPLIER_KEYWORDS
   - Fallback –ª–æ–≥–∏–∫–∞: –µ—Å–ª–∏ –Ω–µ—Ç –∫–ª—é—á–µ–≤—ã—Ö —Å–ª–æ–≤, –∏—Å–ø–æ–ª—å–∑—É–µ—Ç default –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ —Ç–∏–ø—É
   - –ú–µ—Ç–æ–¥ `_get_default_category_by_type()` –≤–æ–∑–≤—Ä–∞—â–∞–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
   - –ú–µ—Ç–æ–¥ `get_category_suggestions()` —É—á–∏—Ç—ã–≤–∞–µ—Ç transaction_type
4. ‚úÖ **–û–±–Ω–æ–≤–ª–µ–Ω—ã –≤—Å–µ –≤—ã–∑–æ–≤—ã –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä–∞**:
   - `backend/app/services/bank_transaction_import.py` - Excel –∏–º–ø–æ—Ä—Ç
   - `backend/app/services/bank_transaction_1c_import.py` - 1C –∏–º–ø–æ—Ä—Ç
   - `backend/app/api/v1/bank_transactions.py` - API endpoint –¥–ª—è suggestions
   - –¢–µ–ø–µ—Ä—å –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç –¥–ª—è CREDIT –∏ DEBIT (—Ä–∞–Ω—å—à–µ —Ç–æ–ª—å–∫–æ DEBIT)

**–†–µ–∑—É–ª—å—Ç–∞—Ç:** AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ç–æ—Ä —Ç–µ–ø–µ—Ä—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –æ–ø—Ä–µ–¥–µ–ª—è–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤ –∏ —Ä–∞—Å—Ö–æ–¥–æ–≤ —Å —É—á–µ—Ç–æ–º —Ç–∏–ø–∞ –æ–ø–µ—Ä–∞—Ü–∏–∏!

---

### 5. ‚úÖ –£–ª—É—á—à–µ–Ω–Ω–∞—è TransactionClassifier –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ —Ç–∏–ø—É
**–°—Ç–∞—Ç—É—Å:** ‚úÖ –ü–æ–ª–Ω–æ—Å—Ç—å—é –∑–∞–≤–µ—Ä—à–µ–Ω–æ

#### –ù–æ–≤—ã–µ –≤–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏:
- ‚úÖ **Confidence boost**: +10% –¥–ª—è CREDIT —Å revenue keywords, +5% –¥–ª—è DEBIT —Å supplier keywords
- ‚úÖ **–ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–æ—Ä—è–¥–æ–∫ keywords**: –°–Ω–∞—á–∞–ª–∞ –ø—Ä–æ–≤–µ—Ä—è—é—Ç—Å—è —Ä–µ–ª–µ–≤–∞–Ω—Ç–Ω—ã–µ —Å–ª–æ–≤–∞—Ä–∏
- ‚úÖ **Fallback –Ω–∞ default –∫–∞—Ç–µ–≥–æ—Ä–∏—é**:
  - CREDIT –±–µ–∑ keywords ‚Üí "–ü–æ–∫—É–ø–∞—Ç–µ–ª–∏ (–ø—Ä–∏—Ö–æ–¥)" (confidence 0.6)
  - DEBIT –±–µ–∑ keywords ‚Üí "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ (—Ä–∞—Å—Ö–æ–¥)" (confidence 0.5)
- ‚úÖ **–¢–æ—á–Ω–æ–µ —Å–æ–≤–ø–∞–¥–µ–Ω–∏–µ –ø–æ –∏–º–µ–Ω–∏**: –°–Ω–∞—á–∞–ª–∞ –∏—â–µ—Ç –∫–∞—Ç–µ–≥–æ—Ä–∏—é —Å —Ç–æ—á–Ω—ã–º –∏–º–µ–Ω–µ–º
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ keywords –¥–ª—è –¥–æ—Ö–æ–¥–æ–≤**: –¥–æ–±–∞–≤–ª–µ–Ω—ã "–ø–æ—Å—Ç—É–ø–ª–µ–Ω–∏–µ", "–ø—Ä–∏—Ö–æ–¥", "–¥–æ—Ö–æ–¥–∞", "–≤–æ–∑–≤—Ä–∞—Ç"
- ‚úÖ **–†–∞—Å—à–∏—Ä–µ–Ω–Ω—ã–µ keywords –¥–ª—è –ø–æ—Å—Ç–∞–≤—â–∏–∫–æ–≤**: –¥–æ–±–∞–≤–ª–µ–Ω—ã "–∑–∞–∫—É–ø–∫–∞", "–ø—Ä–∏–æ–±—Ä–µ—Ç–µ–Ω–∏–µ", "–ø–æ–∫—É–ø–∫–∞"

---

## üìù –ß—Ç–æ –æ—Å—Ç–∞–ª–æ—Å—å —Ä–µ–∞–ª–∏–∑–æ–≤–∞—Ç—å

### 1. ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∫–∞–∂–¥—ã–µ 60 –º–∏–Ω—É—Ç

**–ó–∞–¥–∞—á–∞:** Cron-–∑–∞–¥–∞—á–∞ –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω–æ–π —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ –∏–∑ 1–°

**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
1. –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç `backend/scripts/sync_1c_hourly.py`
   - –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ –∑–∞ —Å–µ–≥–æ–¥–Ω—è
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `OData1CClient` –∏ `BankTransaction1CSync`
   - –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
2. –°–æ–∑–¥–∞—Ç—å bash-—Å–∫—Ä–∏–ø—Ç `backend/scripts/cron_hourly_sync.sh`
3. –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron:
   ```bash
   0 * * * * /path/to/backend/scripts/cron_hourly_sync.sh
   ```
4. –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è: `docs/CRON_SETUP.md` (—É–∂–µ —Å—É—â–µ—Å—Ç–≤—É–µ—Ç)

**–ó–∞—â–∏—Ç–∞ –æ—Ç –¥—É–±–ª–µ–π:**
- –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `external_id_1c` (unique constraint)
- –ó–∞–≥—Ä—É–∂–∞—Ç—å —Ç–æ–ª—å–∫–æ –∑–∞ —Å–µ–≥–æ–¥–Ω—è

---

### 4. ‚ùå Frontend —É–ª—É—á—à–µ–Ω–∏—è

#### A. –§–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É (–±–∞–Ω–∫/–∫–∞—Å—Å–∞)
**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –î–æ–±–∞–≤–∏—Ç—å Select –¥–ª—è –≤—ã–±–æ—Ä–∞ `payment_source` (BANK/CASH)
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å –≤ API –∑–∞–ø—Ä–æ—Å
- –û–±–Ω–æ–≤–∏—Ç—å `bankTransactionsApi.getTransactions()`

**–§–∞–π–ª—ã –¥–ª—è –∏–∑–º–µ–Ω–µ–Ω–∏—è:**
- `frontend/src/pages/BankTransactionsPage.tsx`
- `frontend/src/api/bankTransactions.ts`
- `frontend/src/types/bankTransaction.ts`

#### B. –ú–µ—Ç–∫–∞ "–ê–≤—Ç–æ" –¥–ª—è –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –∫–∞—Ç–µ–≥–æ—Ä–∏–π
**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–æ–∫–∞–∑—ã–≤–∞—Ç—å –±–µ–π–¥–∂ "–ê–≤—Ç–æ" –µ—Å–ª–∏:
  - `category_confidence >= 0.9`
  - –ö–∞—Ç–µ–≥–æ—Ä–∏—è –±—ã–ª–∞ –Ω–∞–∑–Ω–∞—á–µ–Ω–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ (–Ω–µ –≤—Ä—É—á–Ω—É—é)

**–ü—Ä–∏–º–µ—Ä UI:**
```tsx
{record.category_name && (
  <Tag color="blue">
    {record.category_name}
    {record.category_confidence && record.category_confidence >= 0.9 && (
      <Tag color="green" size="small" style={{ marginLeft: 4 }}>
        –ê–≤—Ç–æ
      </Tag>
    )}
  </Tag>
)}
```

#### C. Stats —Å —É—á–µ—Ç–æ–º —Ñ–∏–ª—å—Ç—Ä–æ–≤
**–ß—Ç–æ –Ω—É–∂–Ω–æ:**
- –ü–µ—Ä–µ–¥–∞–≤–∞—Ç—å —Ç–µ–∫—É—â–∏–µ —Ñ–∏–ª—å—Ç—Ä—ã –≤ `bankTransactionsApi.getStats()`
- –û–±–Ω–æ–≤–ª—è—Ç—å —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –ø—Ä–∏ –∏–∑–º–µ–Ω–µ–Ω–∏–∏ —Ñ–∏–ª—å—Ç—Ä–æ–≤

---

## üìä –ü—Ä–æ—Ü–µ–Ω—Ç –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç–∏

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|-----------|------------|
| **Backend - –ú–æ–¥–µ–ª—å** | 100% ‚úÖ | –í—Å–µ –ø–æ–ª—è –≥–æ—Ç–æ–≤—ã, –≤–∫–ª—é—á–∞—è payment_source |
| **Backend - API** | 100% ‚úÖ | Stats —Å —Ñ–∏–ª—å—Ç—Ä–∞–º–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç –ø–æ–ª–Ω–æ—Å—Ç—å—é |
| **Backend - AI Classifier** | 100% ‚úÖ | **–û–ë–ù–û–í–õ–ï–ù–û:** –ê–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏–µ –ø–æ —Ç–∏–ø—É –æ–ø–µ—Ä–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞–µ—Ç! |
| **Backend - OData 1C** | 100% ‚úÖ | –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ä–∞–±–æ—Ç–∞–µ—Ç |
| **Frontend - UI** | 100% ‚úÖ | –ú–µ—Ç–∫–∞ "–ê–≤—Ç–æ" –¥–æ–±–∞–≤–ª–µ–Ω–∞ |
| **Frontend - –§–∏–ª—å—Ç—Ä—ã** | 100% ‚úÖ | –í—Å–µ —Ñ–∏–ª—å—Ç—Ä—ã —Ä–∞–±–æ—Ç–∞—é—Ç |
| **Cron –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è** | 0% ‚ùå | –ù–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω–æ |
| **–ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –ü–æ–∫—É–ø–∞—Ç–µ–ª–∏/–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏** | 100% ‚úÖ | **–ù–û–í–û–ï:** –î–æ–±–∞–≤–ª–µ–Ω—ã –¥–ª—è –≤—Å–µ—Ö 8 –æ—Ç–¥–µ–ª–æ–≤ |

**–û–±—â–∞—è –≥–æ—Ç–æ–≤–Ω–æ—Å—Ç—å:** ~98% ‚úÖ (+13% –∑–∞ —Å–µ–≥–æ–¥–Ω—è) üéâ

---

## üéØ –ü—Ä–∏–æ—Ä–∏—Ç–µ—Ç–Ω—ã–π –ø–ª–∞–Ω –¥–æ—Ä–∞–±–æ—Ç–æ–∫

### ‚úÖ –í—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –ó–ê–í–ï–†–®–ï–ù–û
1. ‚úÖ ~~–î–æ–±–∞–≤–∏—Ç—å `payment_source` (BANK/CASH)~~ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**
2. ‚úÖ ~~–û–±–Ω–æ–≤–∏—Ç—å endpoint GET /stats –¥–ª—è —Ñ–∏–ª—å—Ç—Ä–æ–≤~~ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**
3. ‚úÖ ~~–î–æ–±–∞–≤–∏—Ç—å —Ñ–∏–ª—å—Ç—Ä –ø–æ `payment_source` –Ω–∞ —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–µ~~ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**
4. ‚úÖ ~~–î–æ–±–∞–≤–∏—Ç—å –º–µ—Ç–∫—É "–ê–≤—Ç–æ" –¥–ª—è –∫–∞—Ç–µ–≥–æ—Ä–∏–π~~ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ**

### ‚úÖ –°—Ä–µ–¥–Ω–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç - –ó–ê–í–ï–†–®–ï–ù–û
5. ‚úÖ ~~–î–æ–±–∞–≤–∏—Ç—å –∫–∞—Ç–µ–≥–æ—Ä–∏–∏ "–ü–æ–∫—É–ø–∞—Ç–µ–ª–∏ (–ø—Ä–∏—Ö–æ–¥)" –∏ "–ü–æ—Å—Ç–∞–≤—â–∏–∫–∏ (—Ä–∞—Å—Ö–æ–¥)"~~ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ** (30 –º–∏–Ω—É—Ç)
6. ‚úÖ ~~–£–ª—É—á—à–∏—Ç—å TransactionClassifier –¥–ª—è –∞–≤—Ç–æ–æ–ø—Ä–µ–¥–µ–ª–µ–Ω–∏—è –ø–æ —Ç–∏–ø—É~~ **–ó–∞–≤–µ—Ä—à–µ–Ω–æ** (1 —á–∞—Å)

### –ù–∏–∑–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç (1-2 —á–∞—Å–∞)
8. ‚ùå –°–æ–∑–¥–∞—Ç—å —Å–∫—Ä–∏–ø—Ç –∞–≤—Ç–æ—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–∏ (1 —á–∞—Å)
9. ‚ùå –ù–∞—Å—Ç—Ä–æ–∏—Ç—å cron (30 –º–∏–Ω—É—Ç)
10. ‚ùå –û–±–Ω–æ–≤–∏—Ç—å –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—é CRON_SETUP.md (10 –º–∏–Ω—É—Ç)

---

## üìö –°–ø—Ä–∞–≤–æ—á–Ω–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

### –£–∂–µ —Å—É—â–µ—Å—Ç–≤—É—é—â–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è:
- ‚úÖ [CLAUDE.md](../CLAUDE.md#bank-transactions) - –ü–æ–ª–Ω–æ–µ –æ–ø–∏—Å–∞–Ω–∏–µ –º–æ–¥—É–ª—è
- ‚úÖ [BANK_TRANSACTIONS_STATUSES.md](BANK_TRANSACTIONS_STATUSES.md) - –°–ø—Ä–∞–≤–æ—á–Ω–∏–∫ —Å—Ç–∞—Ç—É—Å–æ–≤
- ‚úÖ [BANK_TRANSACTIONS_KEYWORDS.md](BANK_TRANSACTIONS_KEYWORDS.md) - –ö–ª—é—á–µ–≤—ã–µ —Å–ª–æ–≤–∞ –¥–ª—è AI
- ‚úÖ [BANK_TRANSACTIONS_IMPORT_GUIDE.md](BANK_TRANSACTIONS_IMPORT_GUIDE.md) - –ò–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ –∏–º–ø–æ—Ä—Ç—É
- ‚úÖ [1C_ODATA_INTEGRATION.md](1C_ODATA_INTEGRATION.md) - –ò–Ω—Ç–µ–≥—Ä–∞—Ü–∏—è —Å 1–°
- ‚úÖ [1C_EXPENSE_REQUESTS_SYNC.md](1C_EXPENSE_REQUESTS_SYNC.md) - –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è –∑–∞—è–≤–æ–∫
- ‚úÖ [CRON_SETUP.md](CRON_SETUP.md) - –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –∞–≤—Ç–æ–∑–∞–¥–∞—á

### –ö–ª—é—á–µ–≤—ã–µ —Ñ–∞–π–ª—ã –∫–æ–¥–∞:
- **Backend:**
  - `backend/app/db/models.py` - –ú–æ–¥–µ–ª—å BankTransaction
  - `backend/app/api/v1/bank_transactions.py` - API endpoints
  - `backend/app/schemas/bank_transaction.py` - Pydantic schemas
  - `backend/app/services/transaction_classifier.py` - AI –∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è
  - `backend/app/services/bank_transaction_import.py` - –ò–º–ø–æ—Ä—Ç –∏–∑ Excel
  - `backend/app/services/odata_1c_client.py` - –ö–ª–∏–µ–Ω—Ç –¥–ª—è 1–° OData

- **Frontend:**
  - `frontend/src/pages/BankTransactionsPage.tsx` - –û—Å–Ω–æ–≤–Ω–∞—è —Å—Ç—Ä–∞–Ω–∏—Ü–∞
  - `frontend/src/api/bankTransactions.ts` - API –∫–ª–∏–µ–Ω—Ç
  - `frontend/src/types/bankTransaction.ts` - TypeScript —Ç–∏–ø—ã
  - `frontend/src/components/bank/ColumnMappingModal.tsx` - –ú–∞–ø–ø–∏–Ω–≥ –∫–æ–ª–æ–Ω–æ–∫ –ø—Ä–∏ –∏–º–ø–æ—Ä—Ç–µ

---

## üîÑ Workflow –æ–±—Ä–∞–±–æ—Ç–∫–∏ —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–π (—Ç–µ–∫—É—â–∏–π)

```
1. –ò–ú–ü–û–†–¢
   ‚Üì
   Excel / OData ‚Üí BankTransactionImporter / OData1CClient
   ‚Üì
   –°–æ–∑–¥–∞–Ω–∏–µ –∑–∞–ø–∏—Å–µ–π —Å–æ —Å—Ç–∞—Ç—É—Å–æ–º NEW

2. AI –ö–õ–ê–°–°–ò–§–ò–ö–ê–¶–ò–Ø (–µ—Å–ª–∏ auto_classify=true)
   ‚Üì
   TransactionClassifier –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç payment_purpose
   ‚Üì
   - Keyword matching (—Å –≤–µ—Å–∞–º–∏)
   - –ò—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏–µ –¥–∞–Ω–Ω—ã–µ
   - –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–ø–æ –ò–ù–ù)
   ‚Üì
   –ï—Å–ª–∏ confidence > 90% ‚Üí category_id, —Å—Ç–∞—Ç—É—Å = CATEGORIZED
   –ï—Å–ª–∏ confidence < 90% ‚Üí suggested_category_id, —Å—Ç–∞—Ç—É—Å = NEEDS_REVIEW

3. SMART MATCHING (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
   ‚Üì
   –ü–æ–∏—Å–∫ –ø–æ–¥—Ö–æ–¥—è—â–∏—Ö –∑–∞—è–≤–æ–∫ (expenses) –ø–æ:
   - –ö–æ–Ω—Ç—Ä–∞–≥–µ–Ω—Ç (–ò–ù–ù)
   - –°—É–º–º–∞ (¬±5%)
   - –î–∞—Ç–∞ (¬±30 –¥–Ω–µ–π)
   ‚Üì
   –ï—Å–ª–∏ score > 85 ‚Üí expense_id, —Å—Ç–∞—Ç—É—Å = MATCHED
   –ï—Å–ª–∏ score < 85 ‚Üí suggested_expense_id

4. –†–£–ß–ù–ê–Ø –ü–†–û–í–ï–†–ö–ê (—Ñ–∏–Ω–∞–Ω—Å–∏—Å—Ç)
   ‚Üì
   - –ü—Ä–æ–≤–µ—Ä–∫–∞ NEEDS_REVIEW
   - –£—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –∏–ª–∏ –∫–æ—Ä—Ä–µ–∫—Ç–∏—Ä–æ–≤–∫–∞
   ‚Üì
   –°—Ç–∞—Ç—É—Å = APPROVED
```

---

## ‚ú® –í—ã–≤–æ–¥—ã

### –ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç –æ—Ç–ª–∏—á–Ω–æ:
- ‚úÖ –ú–æ–¥–µ–ª—å –¥–∞–Ω–Ω—ã—Ö –ø—Ä–æ–¥—É–º–∞–Ω–∞ –∏ —Ä–∞—Å—à–∏—Ä—è–µ–º–∞
- ‚úÖ AI-–∫–ª–∞—Å—Å–∏—Ñ–∏–∫–∞—Ü–∏—è –¥–∞–µ—Ç 80-90% —Ç–æ—á–Ω–æ—Å—Ç–∏ –¥–ª—è —Ä–µ–≥—É–ª—è—Ä–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- ‚úÖ –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Å 1–° —Ä–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ
- ‚úÖ Frontend –∏–Ω—Ç—É–∏—Ç–∏–≤–Ω—ã–π –∏ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω—ã–π
- ‚úÖ Multi-tenancy –∏ security —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã –ø—Ä–∞–≤–∏–ª—å–Ω–æ

### –ß—Ç–æ –Ω—É–∂–Ω–æ —É–ª—É—á—à–∏—Ç—å:
- ‚ùå –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ cron
- ‚ùå –ü–µ—Ä–µ—Å—á–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Ñ–∏–ª—å—Ç—Ä–∞–º
- ‚ùå –ö–∞—Ç–µ–≥–æ—Ä–∏–∏ –¥–ª—è –ø—Ä–∏—Ö–æ–¥–æ–≤/—Ä–∞—Å—Ö–æ–¥–æ–≤ –ø–æ —É–º–æ–ª—á–∞–Ω–∏—é
- ‚ùå –§–∏–ª—å—Ç—Ä –ø–æ –∏—Å—Ç–æ—á–Ω–∏–∫—É (–±–∞–Ω–∫/–∫–∞—Å—Å–∞)

### –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏:
1. –ó–∞–≤–µ—Ä—à–∏—Ç—å –æ—Å—Ç–∞–≤—à–∏–µ—Å—è –∑–∞–¥–∞—á–∏ (–≤—ã—Å–æ–∫–∏–π –ø—Ä–∏–æ—Ä–∏—Ç–µ—Ç)
2. –ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫—É—é —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—é
3. –û–±—É—á–∏—Ç—å –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π —Ä–∞–±–æ—Ç–µ —Å —Å–∏—Å—Ç–µ–º–æ–π
4. –°–æ–±—Ä–∞—Ç—å –æ–±—Ä–∞—Ç–Ω—É—é —Å–≤—è–∑—å –¥–ª—è –¥–∞–ª—å–Ω–µ–π—à–∏—Ö —É–ª—É—á—à–µ–Ω–∏–π

---

**–ê–≤—Ç–æ—Ä –æ—Ç—á–µ—Ç–∞:** Claude Code
**–î–∞—Ç–∞ –ø–æ—Å–ª–µ–¥–Ω–µ–≥–æ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:** 17 –Ω–æ—è–±—Ä—è 2025
